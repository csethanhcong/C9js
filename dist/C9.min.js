!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.C9=e():t.C9=e()}(this,function(){return function(t){function e(n){if(a[n])return a[n].exports;var o=a[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var a={};return e.m=t,e.c=a,e.p="",e(0)}([function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var o=a(9),r=n(o),i=a(10),c=n(i),s=a(11),l=n(s),u=a(12),f=n(u),d=a(13),p=n(d),h=a(14),g=n(h),y=a(1),m=n(y),v=a(2),b=n(v),k=a(15);n(k);t.exports={BarChart:r["default"],DonutChart:c["default"],LineChart:l["default"],PieChart:f["default"],TimeLine:p["default"],Map:g["default"],DataAdapter:b["default"],Helper:m["default"]}},function(t,e){"use strict";function a(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function n(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function o(t,e){if(c.isObject(t)&&c.isObject(e))for(var n in e)c.isObject(e[n])?(i.isEmpty(t[n])&&Object.assign(t,a({},n,{})),o(t[n],e[n])):Object.assign(t,a({},n,e[n]));return t}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i={each:function(t,e,a,n){var o,i;if(a.isArray(t))if(i=t.length,n)for(o=i-1;o>=0;o--)e.call(a,t[o],o);else for(o=0;i>o;o++)e.call(a,t[o],o);else if("object"===("undefined"==typeof t?"undefined":r(t))){var c=Object.keys(t);for(i=c.length,o=0;i>o;o++)e.call(a,t[c[o]],c[o])}},setValue:function(t,e){var a=this;a[e]=t},setPrefix:function(t){var e="_";return t?e+t:void 0},isEmpty:function(t){return null===t||void 0===t||c.isArray(t)&&0===t.length||c.isArray(t)&&c.isEmpty(t[0])},isObject:function(t){return!c.isEmpty(t)&&"object"===("undefined"==typeof t?"undefined":r(t))},isArray:function(t){return!c.isEmpty(t)&&(Array.isArray(t)||"[object Array]"===Object.prototype.toString.call(t))},isFunction:function(t){return!c.isEmpty(t)&&"function"==typeof t},merge:function(t,e){var a={};for(var n in e)c.isEmpty(e[n])||(a[n]=e[n]);for(var n in t)c.isEmpty(t[n])||(a[n]=t[n]);return a},mergeDeep:function(t,e){return o(t,e)},get:function(t,e){for(var a=t.split("."),n=e,o=0;o<a.length;o++){if("undefined"==typeof n[a[o]])return"";n=n[a[o]]}return n},set:function(t,e,a){for(var n=a,o=t.split("."),r=o.length,i=0;r-1>i;i++){var c=o[i];n[c]||(n[c]={}),n=n[c]}n[o[r-1]]=e},max:function(t){return Math.max.apply(Math,n(t))},min:function(t){return Math.min.apply(Math,n(t))},sum:function(t){return t.reduce(function(t,e){return t+e},0)},guid:function(){return"c9-xxxxxx-4xxx-yxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,a="x"==t?e:3&e|8;return a.toString(16)})},getMinMax:function(t,e,a){var n=this,o=new Array,r=0,i=0;"stack"==e?t.forEach(function(t){t.forEach(function(t){t.y0>0?o.push(t.y1):o.push(t.y1+t.y0)})}):t.forEach(function(t){t.forEach(function(t){o.push(t.y0)})});var c=n.min(o),s=n.max(o);return(r>c||a)&&(r=c),s>i&&(i=s),{min:r,max:i}},dateParser:function(t){return d3.time.format(t).parse},dateFormatter:function(t){return d3.time.format(t)},shadeColor:function(t,e,a){if(e=c.convertColorToHex(e)||e,"number"!=typeof t||-1>t||t>1||"string"!=typeof e||"r"!=e[0]&&"#"!=e[0]||"string"!=typeof a&&"undefined"!=typeof a)return null;this.sbcRip||(this.sbcRip=function(t){var e=t.length,a=new Object;if(e>9){if(t=t.split(","),t.length<3||t.length>4)return null;a[0]=n(t[0].slice(4)),a[1]=n(t[1]),a[2]=n(t[2]),a[3]=t[3]?parseFloat(t[3]):-1}else{if(8==e||6==e||4>e)return null;6>e&&(t="#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+(e>4?t[4]+""+t[4]:"")),t=n(t.slice(1),16),a[0]=t>>16&255,a[1]=t>>8&255,a[2]=255&t,a[3]=9==e||5==e?o((t>>24&255)/255*1e4)/1e4:-1}return a});var n=parseInt,o=Math.round,r=e.length>9,r="string"==typeof a?a.length>9?!0:"c"==a?!r:!1:r,i=0>t,t=i?-1*t:t,a=a&&"c"!=a?a:i?"#000000":"#FFFFFF",s=this.sbcRip(e),l=this.sbcRip(a);return s&&l?r?"rgb("+o((l[0]-s[0])*t+s[0])+","+o((l[1]-s[1])*t+s[1])+","+o((l[2]-s[2])*t+s[2])+(s[3]<0&&l[3]<0?")":","+(s[3]>-1&&l[3]>-1?o(1e4*((l[3]-s[3])*t+s[3]))/1e4:l[3]<0?s[3]:l[3])+")"):"#"+(4294967296+16777216*(s[3]>-1&&l[3]>-1?o(255*((l[3]-s[3])*t+s[3])):l[3]>-1?o(255*l[3]):s[3]>-1?o(255*s[3]):255)+65536*o((l[0]-s[0])*t+s[0])+256*o((l[1]-s[1])*t+s[1])+o((l[2]-s[2])*t+s[2])).toString(16).slice(s[3]>-1||l[3]>-1?1:3):null},scroll:function(t,e,a){var n=this;if(!(0>=a)){var o=e-t.scrollTop,r=o/a*10;setTimeout(function(){t.scrollTop=t.scrollTop+r,t.scrollTop!==e&&n.scroll(t,e,a-10)},10)}}},c={isEmpty:function(t){return null===t||void 0===t},isArray:function(t){return Array.isArray(t)||"[object Array]"===Object.prototype.toString.call(t)},isObject:function(t){return t&&"object"===("undefined"==typeof t?"undefined":r(t))&&!Array.isArray(t)},convertColorToHex:function(t){var e={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return"undefined"!=typeof e[t.toLowerCase()]?e[t.toLowerCase()]:!1}};t.exports=i},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),c=a(1),s=n(c),l=function(){function t(e,a,n){o(this,t);var r=this,i={keys:{name:"name",value:"value",x:"value.x",y:"value",coor:"coor",icon:"icon"},groups:[],stacks:[],timeFormat:!1,colorRange:null};r._keys=s["default"].merge(e.keys,i.keys),r._groups=e.groups||i.groups,r._stacks=e.stacks||i.stacks,r._timeFormat=e.timeFormat||i.timeFormat,r._colorRange=e.colorRange||i.colorRange,r._dataSource=[],r._dataTarget=[],r._dataRefs=[],r._options=e,r._chartType=a,r._callback=n,r.updateConfig(i)}return i(t,[{key:"updateConfig",value:function(t){var e=this;e.options=s["default"].mergeDeep(t,e.options)}},{key:"hasPlainData",value:function(){var t=this;return!s["default"].isEmpty(t.options.plain)}},{key:"hasFile",value:function(){var t=this;return s["default"].isObject(t.options.file)&&!s["default"].isEmpty(t.options.file.url)&&!s["default"].isEmpty(t.options.file.type)}},{key:"executePlainData",value:function(t){var e=this;e.dataSource=e.options.plain,t.call(e,e.dataSource)}},{key:"executeFile",value:function(t){var e=this;if(e.file=e.options.file,!s["default"].isEmpty(e.file))switch(e.file.type){case"csv":e.getCsv(t);break;case"tsv":e.getTsv(t);break;case"text":e.getText(t);break;case"json":e.getJson(t);break;case"xml":e.getXml(t);break;case"xhr":e.getJson(t);break;default:e.getJson(t)}}},{key:"getDataTypeForBarChart",value:function(){var t=this;if(!s["default"].isEmpty(t.groups)&&s["default"].isArray(t.groups)&&1!==t.groups.length)return"group";if(!s["default"].isEmpty(t.stacks)&&s["default"].isArray(t.stacks))return"stack";for(var e=t.dataSource.length-1;e>=0;e--)if(s["default"].isArray(s["default"].get(t.keys.value,t.dataSource[e])))return"group";return"single"}},{key:"getDataTarget",value:function(t,e){var a=this;a.hasFile()?a.executeFile(function(n){a.dataSource=n,a.generateDataTarget(t),e.call(a,a.dataTarget)}):a.hasPlainData()&&a.executePlainData(function(n){a.dataSource=n,a.generateDataTarget(t),e.call(a,a.dataTarget)})}},{key:"generateDataTarget",value:function(t){var e=this;switch(t){case"bar":e.getDataTargetForBarChart();break;case"line":e.getDataTargetForLineChart();break;case"pie":e.getDataTargetForPieChart();break;case"donut":e.getDataTargetForDonutChart();break;case"timeline":e.getDataTargetForTimelineChart();break;case"map":e.getDataTargetForMap();break;default:e.dataTarget=e.dataSource}}},{key:"getName",value:function(t){return t.name}},{key:"getValue",value:function(t){var e=this;return s["default"].get(e.keys,t)}},{key:"getDataTargetForBarChart",value:function(){var t,e,t,a=this,n=function(){switch(a.getDataTypeForBarChart()){case"single":var n=a.colorRange,o=a.groups;a.dataSource.forEach(function(t,e){var r=[{name:s["default"].get(a.keys.name,t),value:s["default"].get(a.keys.value,t),y0:s["default"].get(a.keys.value,t),y1:s["default"].get(a.keys.value,t),group:o[0]||"data1","data-ref":s["default"].guid(),enable:!0,color:n(0)}];a.dataTarget.push(r)});break;case"group":return o=a.groups,t=[],a.dataSource.forEach(function(e,n){var r=s["default"].get(a.keys.value,e),i=[],c={color:"#ffffff",y0:0,y1:1,group:"",name:"","data-ref":"","group-ref":"",enable:!0},l=a.colorRange;s["default"].isArray(r)?r.forEach(function(n,r){t.length-1<r&&t.push(s["default"].guid()),s["default"].isEmpty(o[r])&&o.push("data"+(r+1)),c={color:l(r),y0:n,y1:n>0?n:0,group:o[r],name:s["default"].get(a.keys.name,e),value:n,"data-ref":s["default"].guid(),"group-ref":t[r],enable:!0},i.push(c)}):(0==t.length&&t.push(s["default"].guid()),s["default"].isEmpty(o[0])&&o.push("data1"),c={color:l(0),y0:r,y1:r>0?r:0,group:o[0],name:s["default"].get(a.keys.name,e),value:r,"data-ref":s["default"].guid(),"group-ref":t[0],enable:!0},i.push(c)),a.dataTarget.push(i)}),a.groups=o,{v:a.dataTarget};case"stack":return e=a.stacks,t=[],a.dataSource.forEach(function(n,o){var r=s["default"].get(a.keys.value,n),i=[],c={color:"#ffffff",y0:0,y1:1,group:"",name:"","data-ref":"",enable:!0},l=a.colorRange;s["default"].isArray(r)?!function(){var o=0,u=0;r.forEach(function(r,f){t.length-1<f&&t.push(s["default"].guid()),s["default"].isEmpty(e[f])&&e.push("data"+(f+1)),c={color:l(f),y0:r,y1:r>0?r+u:o,group:e[f],name:s["default"].get(a.keys.name,n),value:r,"data-ref":s["default"].guid(),"group-ref":t[f],enable:!0},i.push(c),r>0?u+=r:o+=r})}():(0==t.length&&t.push(s["default"].guid()),s["default"].isEmpty(e[0])&&e.push("data1"),c={color:l(0),y0:r,y1:r>0?r:0,group:e[0],name:s["default"].get(a.keys.name,n),value:r,"data-ref":s["default"].guid(),"group-ref":t[0],enable:!0},i.push(c)),a.dataTarget.push(i)}),a.stacks=e,{v:a.dataTarget};default:return{v:a.dataSource}}}();return"object"===("undefined"==typeof n?"undefined":r(n))?n.v:void 0}},{key:"getDataTargetForPieChart",value:function(){var t=this,e=t.colorRange;return t.dataSource.forEach(function(a,n){var o={color:e(n),name:s["default"].get(t.keys.name,a),value:s["default"].get(t.keys.value,a),"data-ref":s["default"].guid(),enable:!0};t.dataTarget.push(o)}),t.dataTarget}},{key:"getDataTargetForDonutChart",value:function(){var t=this,e=t.colorRange;return t.dataSource.forEach(function(a,n){var o={color:e(n),"data-ref":s["default"].guid(),enable:!0,name:s["default"].get(t.keys.name,a),value:s["default"].get(t.keys.value,a)};t.dataTarget.push(o)}),t.dataTarget}},{key:"getDataTargetForTimelineChart",value:function(){var t=this,e=t.colorRange;return t.dataSource.forEach(function(a,n){var o={icon:s["default"].get(t.keys.icon,a),name:s["default"].get(t.keys.name,a),value:[],"data-ref":s["default"].guid(),enable:!0},r=s["default"].get(t.keys.value,a),i=[],c={name:s["default"].get(t.keys.name,a),start:null,end:null,color:"#fff","data-ref":null,enable:!0,icon:null};s["default"].isArray(r)?r.forEach(function(o,r){c={name:s["default"].get(t.keys.name,a),start:new Date(o.start),end:new Date(o.end),color:e(n),"data-ref":s["default"].guid(),enable:!0,icon:s["default"].get(t.keys.icon,a)},i.push(c)}):(c={name:s["default"].get(t.keys.name,a),start:new Date(r.start),end:new Date(r.end),color:e(n),"data-ref":s["default"].guid(),enable:!0,icon:s["default"].get(t.keys.icon,a)},i.push(c)),o.value=i,t.dataTarget.push(o)}),t.dataTarget}},{key:"getDataTargetForLineChart",value:function(){var t=this,e=t.colorRange;return t.dataSource.forEach(function(a,n){var o={color:e(n),name:s["default"].get(t.keys.name,a),value:[],"data-ref":s["default"].guid(),enable:!0},r=s["default"].get(t.keys.x,a),i=s["default"].get(t.keys.y,a),c=[],l={name:s["default"].get(t.keys.name,a),valueX:null,valueY:null,"data-ref":s["default"].guid(),enable:!0};s["default"].isArray(i)&&(s["default"].isArray(r)?s["default"].isArray(r)&&!t.timeFormat?i.forEach(function(e,n){l={name:s["default"].get(t.keys.name,a),valueX:s["default"].isEmpty(r[n])?n:r[n],valueY:e,"data-ref":s["default"].guid(),enable:!0},c.push(l)}):s["default"].isArray(r)&&t.timeFormat&&!function(){var e=s["default"].dateParser(t.timeFormat);i.forEach(function(n,o){l={name:s["default"].get(t.keys.name,a),valueX:s["default"].isEmpty(r[o])?o:e(r[o]),valueY:n,"data-ref":s["default"].guid(),enable:!0},c.push(l)})}():i.forEach(function(e,n){l={name:s["default"].get(t.keys.name,a),valueX:n,valueY:e,"data-ref":s["default"].guid(),enable:!0},c.push(l)})),o.value=c,t.dataTarget.push(o)}),t.dataTarget}},{key:"getDataTargetForMap",value:function(){var t=this,e=function(t,e,a){var n=t.split("."),o=s["default"].get(t,e),r=void 0;return 1!=n.length||"value"!=n[0]||a?(r=new Object,r[n[n.length-1]]=o):r=o,r},a=function(a){var n={name:s["default"].get(t.keys.name,a),coor:s["default"].get(t.keys.coor,a),value:null};return s["default"].isArray(t.keys.value)?t.keys.value.forEach(function(t){var o=e(t,a,!0);n.value=s["default"].merge(n.value,o)}):n.value=e(t.keys.value,a,!1),n};return s["default"].isArray(t.dataSource)?t.dataSource.forEach(function(e){t.dataTarget.push(a(e))}):t.dataTarget=a(t.dataSource),t.dataTarget}},{key:"getCsv",value:function(t){var e=this;d3.csv(e.file.url,function(a,n){if(a)throw a;!s["default"].isEmpty(t)&&s["default"].isFunction(t)&&t.call(e,n)})}},{key:"getTsv",value:function(t){var e=this;d3.tsv(e.file.url,function(a,n){if(a)throw a;!s["default"].isEmpty(t)&&s["default"].isFunction(t)&&t.call(e,n)})}},{key:"getText",value:function(t){var e=this;d3.text(e.file.url,function(a,n){if(a)throw a;!s["default"].isEmpty(t)&&s["default"].isFunction(t)&&t.call(e,n)})}},{key:"getJson",value:function(t){var e=this;d3.json(e.file.url,function(a,n){if(a)throw a;!s["default"].isEmpty(t)&&s["default"].isFunction(t)&&t.call(e,n)})}},{key:"getXml",value:function(t){var e=this;d3.xml(e.file.url,function(a,n){if(a)throw a;n=[].map.call(n.querySelectorAll("data"),function(t){return{name:t.querySelector("name").textContent,value:t.querySelector("value").textContent}}),!s["default"].isEmpty(t)&&s["default"].isFunction(t)&&t.call(e,n)})}},{key:"options",get:function(){return this._options},set:function(t){t&&(this._options=t)}},{key:"callback",get:function(){return this._callback}},{key:"chartType",get:function(){return this._chartType}},{key:"file",get:function(){return this._file},set:function(t){t&&(this._file=t)}},{key:"keys",get:function(){return this._keys},set:function(t){t&&(this._keys=t)}},{key:"dataSource",get:function(){return this._dataSource},set:function(t){t&&(this._dataSource=t)}},{key:"dataTarget",get:function(){return this._dataTarget},set:function(t){t&&(this._dataTarget=t)}},{key:"groups",get:function(){return this._groups},set:function(t){t&&(this._groups=t)}},{key:"stacks",get:function(){return this._stacks},set:function(t){t&&(this._stacks=t)}},{key:"colorRange",get:function(){return this._colorRange},set:function(t){t&&(this._colorRange=t)}},{key:"timeFormat",get:function(){return this._timeFormat},set:function(t){t&&(this._timeFormat=t)}}]),t}();e["default"]=l},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),c=a(1),s=n(c),l=function(){function t(e){o(this,t);var a=this,n={show:!0,position:"right",backgroundColor:"rgba(0, 0, 0, 0.8)",fontColor:"#fff",fontSize:"11px",format:null};a._options=e,a.updateConfig(n)}return i(t,[{key:"updateConfig",value:function(t){var e=this;e.options=s["default"].mergeDeep(t,e.options)}},{key:"draw",value:function(t,e,a){var n=this;n.format;d3.select(e.id).selectAll(".c9-custom-tooltip-container").remove();var o=d3.select(e.id),r=o.append("div").attr("class",function(){return"c9-custom-tooltip-container "+n.getTriangleClass()}).style("display","none").style("position","absolute").style("pointer-events","all").style("background-color",n.options.backgroundColor).style("color",n.options.fontColor).style("font-size",n.options.fontSize);if(n.eventFactory={mouseover:function(t){r.html(function(){return n.getFormatByChartType(e,t)}).transition().style("left",function(){return n.getCoordinate(e).left}).style("top",function(){return n.getCoordinate(e).top}).duration(200).style("display","block").style("pointer-events","none")},mousemove:function(t){r.html(function(){return n.getFormatByChartType(e,t)}).transition().style("left",function(){return n.getCoordinate(e).left}).style("top",function(){return n.getCoordinate(e).top}).duration(200).style("display","block").style("pointer-events","none")},mouseout:function(t){r.transition().duration(200).style("display","none")}},n.options.show)switch(a){case"mouseover":n.eventFactory.mouseover(t);break;case"mouseout":n.eventFactory.mouseout(t);break;case"mousemove":n.eventFactory.mousemove(t)}}},{key:"getTriangleClass",value:function(){var t=this,e=void 0;switch(t.options.position){case"top":e="c9-tooltip-top";break;case"right":e="c9-tooltip-right";break;case"bottom":e="c9-tooltip-bottom";break;case"left":e="c9-tooltip-left"}return e}},{key:"setDefaultFormatByChartType",value:function(t,e){var a=this,n=t.chartType,o=void 0;switch(n){case"bar":o=function(t){return"<strong>"+t.name+"</strong><br><span>"+t.value+"</span>"};break;case"pie":o=function(t){return"<strong>"+t.data.name+"</strong><br><span>"+t.data.value+"</span>"};break;case"donut":o=function(t){return"<strong>"+t.data.name+"</strong><br><span>"+t.data.value+"</span>"};break;case"line":o=function(t){var e="";return t.forEach(function(t,a){e+="<strong>"+t.name+"</strong><br><span> Value X: "+t.valueX+"</span><br><span> Value Y: "+t.valueY+"</span><br>"}),e};break;case"timeline":o=function(e){return(e.name?"<strong>"+e.name+"</strong>":"<img src="+e.icon+'" width="'+t.options.itemHeight+'" height="'+t.options.itemHeight+'">')+"<br><strong>Start at: </strong><span>"+e.start+"</span><br><strong>End at: </strong><span>"+e.end+"</span>"}}a.format=a.options.format||o}},{key:"getCoordinate",value:function(t){var e=this,a=void 0,n=e.getOffset(d3.select(t.id)[0][0]);switch(e.options.position){case"top":a={left:d3.event.pageX-n.left-50+"px",top:d3.event.pageY-n.top-50+"px"};break;case"right":a={left:d3.event.pageX-n.left+"px",top:d3.event.pageY-n.top-25+"px"};break;case"bottom":a={left:d3.event.pageX-n.left-50+"px",top:d3.event.pageY-n.top+50+"px"};break;case"left":a={left:d3.event.pageX-n.left-50+"px",top:d3.event.pageY-n.top-25+"px"}}return a}},{key:"getOffset",value:function(t){var e={top:0,left:0};return void 0!==r(t.getBoundingClientRect)&&(e=t.getBoundingClientRect()),{top:e.top+(window.pageYOffset||t.scrollTop)-(t.clientTop||0),left:e.left+(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}}},{key:"getFormatByChartType",value:function(t,e){var a=this;a.setDefaultFormatByChartType(t,e);var n=a.format(e);return n}},{key:"format",get:function(){return this._format},set:function(t){t&&(this._format=t)}},{key:"eventFactory",get:function(){return this._eventFactory},set:function(t){t&&(this._eventFactory=t)}},{key:"options",get:function(){return this._options},set:function(t){t&&(this._options=t)}}]),t}();e["default"]=l},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),c=a(1),s=n(c),l=function(){function t(e){o(this,t);var a=this,n={id:"body",width:750,height:500,margin:{top:100,left:50,right:50,bottom:50},hover:{enable:!0,options:{template:"",onMouseOver:{fadeIn:200,callback:function(t){}},onMouseOut:{fadeOut:500,callback:function(t){}},onMouseMove:{callback:function(t){}}}},click:{callback:function(t){}},title:{show:!0,text:"Sample Chart",position:"top",fontSize:"14px"},legend:{show:!0,position:"top",size:10,fontSize:"12px",fontColor:"#999",fontWeight:"bold",margin:[5,5,5,5],space:10},tooltip:{show:!0,position:"right",backgroundColor:"rgba(0, 0, 0, 0.8)",fontColor:"#fff",fontSize:"11px",format:null},table:{container:"body",show:!1,headings:["Name","Value"],style:"stripe",serial:!0,hover:{enable:!0,callback:null},click:{enable:!0,callback:null}},colorRange:"category20",data:{plain:[],file:{type:null,url:null},keys:{name:"name",value:"value",time:"time"},groups:[],stacks:[]},axis:{x:{tick:{rotate:0,count:10,size:6,padding:3,format:void 0,values:[],type:d3.time.hours,interval:1},label:{text:"Name",position:"default"},show:!0,grid:!1,type:""},y:{tick:{rotate:0,count:10,size:6,padding:3,format:void 0,values:[]},label:{text:"Value",position:"default"},show:!0,grid:!0,type:""}},subchart:{show:!1,height:100}};a._options=e,a.initConfig(n)}return i(t,[{key:"initConfig",value:function(t){var e=this;e.options=s["default"].mergeDeep(t,e.options);var a=e.options;e.id=a.id||t.id,e.width=a.width||t.width,e.height=a.height||t.height,e.colorRange=a.colorRange||t.colorRange,e.margin=s["default"].merge(a.margin,t.margin),e.hover=s["default"].merge(a.hover,t.hover),e.click=s["default"].merge(a.click,t.click),e.dataOption=s["default"].mergeDeep(t.data,a.data),e.options.subchart=s["default"].merge(a.subchart,t.subchart),e.options.table=s["default"].merge(a.table,t.table),e.options.tooltip=s["default"].merge(a.tooltip,t.tooltip),e.options.legend=s["default"].merge(a.legend,t.legend),e.options.axis=s["default"].mergeDeep(t.axis,a.axis)}},{key:"updateConfig",value:function(t){var e=this;e.options=s["default"].mergeDeep(t,e.options);var a=e.options;e.id=a.id||t.id,e.width=a.width||t.width,e.height=a.height||t.height,e.colorRange=a.colorRange||t.colorRange,e.margin=s["default"].merge(a.margin,t.margin),e.hover=s["default"].merge(a.hover,t.hover),e.click=s["default"].merge(a.click,t.click),e.dataOption=s["default"].mergeDeep(t.data,a.data),e.options.subchart=s["default"].merge(a.subchart,t.subchart),e.options.table=s["default"].merge(a.table,t.table),e.options.tooltip=s["default"].merge(a.tooltip,t.tooltip),e.options.legend=s["default"].merge(a.legend,t.legend),e.options.axis=s["default"].mergeDeep(t.axis,a.axis)}},{key:"draw",value:function(){var t=this,e=t.margin,a=t.id,n=t.width-e.left-e.right,o=t.height-e.top-e.bottom;t.container=d3.select(a),t.container.selectAll(".c9-svg").data([]).exit().remove(),t.svg=d3.select(a).style("position","relative").append("svg").attr("class","c9-svg").attr("width",t.width).attr("height",t.height).style("overflow","visible"),t.svg.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",n).attr("height",o),t.body=t.svg.append("g").attr("class","c9-chart c9-custom-container").attr("transform","translate("+e.left+","+e.top+")")}},{key:"getLightenColor",value:function(t){return s["default"].shadeColor(.5,t)}},{key:"on",value:function(t,e){}},{key:"setOption",value:function(t,e){var a=this;s["default"].set(t,e,a.options),a.updateConfig(a.options)}},{key:"updateData",value:function(t,e){}},{key:"container",get:function(){return this._container},set:function(t){t&&(this._container=t)}},{key:"id",get:function(){return"body"!==this._id?"#"+this._id:this._id},set:function(t){t&&(this._id=t)}},{key:"width",get:function(){return this._width},set:function(t){t&&(this._width=t)}},{key:"height",get:function(){return this._height},set:function(t){t&&(this._height=t)}},{key:"actualWidth",get:function(){return this._actualWidth},set:function(t){t&&(this._actualWidth=t)}},{key:"actualHeight",get:function(){return this._actualHeight},set:function(t){t&&(this._actualHeight=t)}},{key:"colorRange",get:function(){var t=this._colorRange;if("string"==typeof t)try{return d3.scale[t]()}catch(e){return function(e){return t}}else if("object"==("undefined"==typeof t?"undefined":r(t)))return d3.scale.ordinal().range(t)},set:function(t){t&&(this._colorRange=t)}},{key:"margin",get:function(){return this._margin},set:function(t){t&&(this._margin=t)}},{key:"dataOption",get:function(){return this._dataOption},set:function(t){t&&(this._dataOption=t)}},{key:"svg",get:function(){return this._svg},set:function(t){t&&(this._svg=t)}},{key:"body",get:function(){return this._body},set:function(t){t&&(this._body=t)}},{key:"options",get:function(){return this._options},set:function(t){t&&(this._options=t)}},{key:"hover",get:function(){return this._hover},set:function(t){t&&(this._hover=t)}},{key:"click",get:function(){return this._click},set:function(t){t&&(this._click=t)}},{key:"dataTarget",get:function(){return this._dataTarget},set:function(t){t&&(this._dataTarget=t)}},{key:"dataSource",get:function(){return this._dataSource},set:function(t){t&&(this._dataSource=t)}},{key:"eventFactory",get:function(){return this._eventFactory},set:function(t){t&&(this._eventFactory=t)}},{key:"x",get:function(){return this._x},set:function(t){t&&(this._x=t)}},{key:"y",get:function(){return this._y},set:function(t){t&&(this._y=t)}},{key:"chartType",get:function(){return this._chartType},set:function(t){t&&(this._chartType=t)}},{key:"title",get:function(){return this._title},set:function(t){t&&(this._title=t)}},{key:"axis",get:function(){return this._axis},set:function(t){t&&(this._axis=t)}},{key:"legend",get:function(){return this._legend},set:function(t){t&&(this._legend=t)}},{key:"table",get:function(){return this._table},set:function(t){t&&(this._table=t)}},{key:"tooltip",get:function(){return this._tooltip},set:function(t){t&&(this._tooltip=t)}}]),t}();e["default"]=l},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),i=a(1),c=n(i),s=function(){function t(e,a,n,r){o(this,t);var i=this,c={x:{tick:{rotate:0,count:10,size:6,padding:3,format:void 0,values:[],time:void 0,interval:1},label:{text:"Name",position:"default"},show:!0,grid:!1,type:""},y:{tick:{rotate:0,count:10,size:6,padding:3,format:void 0,values:[]},label:{text:"Value",position:"default"},show:!0,grid:!0,type:""}};i._options=e,i._chart=a,i._width=n,i._height=r,i.updateConfig(c)}return r(t,[{key:"updateConfig",value:function(t){var e=this;if(e.options=c["default"].mergeDeep(t,e.options),e.x=e.chart.x,e.y=e.chart.y,e.data=e.chart.dataTarget,e.isLogaricVariant=e.chart.options.isLogaric,"timeline"==e.chart.chartType){var a=d3.time.scale().domain([e.chart.options.starting,e.chart.options.ending]).range([0,e.width]);e.xAxis=d3.svg.axis().scale(a).orient("bottom").tickFormat(void 0===e.options.x.tick.format?d3.time.format("%I %p"):e.options.x.tick.format).ticks(e.options.x.tick.time||e.options.x.tick.count,e.options.x.tick.interval)}else e.xAxis=d3.svg.axis().scale(e.x).orient("bottom").tickPadding(e.options.x.tick.padding).ticks(e.options.x.tick.count).tickValues(e.options.x.tick.values.length>0?e.options.x.tick.values:void 0).tickFormat("timeseries"==e.options.x.type?e.options.x.tick.format||d3.time.format("%Y-%m-%d"):e.options.x.tick.format?e.options.x.tick.format:void 0),e.isLogaricVariant?e.yAxis=d3.svg.axis().scale(e.y).orient("left").ticks(e.options.y.tick.count,"timeseries"==e.options.y.type?e.options.y.tick.format||d3.time.format("%Y-%m-%d"):e.options.y.tick.format?e.options.y.tick.format:void 0).tickPadding(e.options.y.tick.padding).tickValues(e.options.y.tick.values.length>0?e.options.y.tick.values:void 0):e.yAxis=d3.svg.axis().scale(e.y).orient("left").ticks(e.options.y.tick.count).tickPadding(e.options.y.tick.padding).tickValues(e.options.y.tick.values.length>0?e.options.y.tick.values:void 0).tickFormat("timeseries"==e.options.y.type?e.options.y.tick.format||d3.time.format("%Y-%m-%d"):e.options.y.tick.format?e.options.y.tick.format:void 0);
"timeline"!=e.chart.chartType&&(e.options.x.grid&&e.xAxis.innerTickSize(-e.height).outerTickSize(0),e.options.y.grid&&e.yAxis.innerTickSize(-e.width).outerTickSize(0));var n=function(t){var e=Math.sin(t*Math.PI/180).toFixed(15);return 0==e?"middle":e>0?"start":"end"},o=function(t){var e=Math.sin(t*Math.PI/180).toFixed(15);return 8*e},r=function(t){return 11.5-2.5*(t/15)*(t>0?1:-1)};e.chart.body.append("g").attr("class","c9-axis c9-axis-x").attr("transform","translate(0,"+e.height+")").call(e.xAxis),e.chart.svg.select(".c9-axis.c9-axis-x").selectAll("text").style("text-anchor",n(e.options.x.tick.rotate)).attr("y",r(e.options.x.tick.rotate)).attr("x",0).attr("dy",".71em").attr("dx",o(e.options.x.tick.rotate)).attr("transform","rotate("+e.options.x.tick.rotate+")"),e.chart.svg.select(".c9-axis.c9-axis-x").append("text").attr("class","c9-axis c9-axis-x-text").attr("dx","-.8em").attr("dy","-.55em").attr("x",e.width+20).attr("y",10).style("text-anchor","start").text(e.options.x.label.text),e.options.x.show||(e.chart.svg.select(".c9-axis.c9-axis-x>.domain").style("display","none"),e.options.x.grid||e.chart.svg.selectAll(".c9-axis.c9-axis-x>g.tick>line").style("display","none")),"timeline"!=e.chart.chartType&&(e.chart.body.append("g").attr("class","c9-axis c9-axis-y").call(e.yAxis),e.chart.svg.select(".c9-axis.c9-axis-y").append("text").attr("class","c9-axis c9-axis-y-text").attr("y",-10).attr("dy",".10").style("text-anchor","end").text(e.options.y.label.text),e.options.y.show||(e.chart.svg.select(".c9-axis.c9-axis-y>.domain").style("display","none"),e.options.y.grid||e.chart.svg.selectAll(".c9-axis.c9-axis-y>g.tick>line").style("display","none")))}},{key:"update",value:function(t,e,a){var n=this;if(!c["default"].isEmpty(t)){if(n.x=t,"timeline"==n.chart.chartType){var o=d3.time.scale().domain([n.chart.options.starting,n.chart.options.ending]).range([0,n.width]);n.xAxis.scale(o)}else n.xAxis.scale(n.x);n.chart.body.select(".c9-axis.c9-axis-x").transition().duration(a).call(n.xAxis)}if(!c["default"].isEmpty(e)){if(n.y=e,"timeline"==n.chart.chartType)return;n.yAxis.scale(n.y),n.chart.body.select(".c9-axis.c9-axis-y").transition().duration(a).call(n.yAxis)}}},{key:"draw",value:function(){var t=this;t.update(t.x,t.y,100)}},{key:"x",get:function(){return this._x},set:function(t){t&&(this._x=t)}},{key:"y",get:function(){return this._y},set:function(t){t&&(this._y=t)}},{key:"xAxis",get:function(){return this._xAxis},set:function(t){t&&(this._xAxis=t)}},{key:"yAxis",get:function(){return this._yAxis},set:function(t){t&&(this._yAxis=t)}},{key:"chart",get:function(){return this._chart},set:function(t){t&&(this._chart=t)}},{key:"options",get:function(){return this._options},set:function(t){t&&(this._options=t)}},{key:"width",get:function(){return this._width},set:function(t){t&&(this._width=t)}},{key:"height",get:function(){return this._height},set:function(t){t&&(this._height=t)}},{key:"data",get:function(){return this._data},set:function(t){t&&(this._data=t)}}]),t}();e["default"]=s},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),i=a(1),c=n(i),s=function(){function t(e,a){o(this,t);var n=this,r={show:!0,position:"top",size:10,fontSize:"12px",fontColor:"#999",fontWeight:"bold",margin:[5,5,5,5],space:10,box:!1};n._options=e,n._chart=a,n.updateConfig(r)}return r(t,[{key:"updateConfig",value:function(t){var e=this;e.options=c["default"].mergeDeep(t,e.options),e.maxWidth=e.chart.width,e.maxHeight=e.chart.height,e.data=e.chart.dataTarget}},{key:"update",value:function(t){var e=this;if(e.data=t,e.options.show){e.chart.svg.selectAll(".c9-custom-legend.c9-custom-legend-container").remove();"bar"==e.chart.chartType&&(e.data=e.data[e.data.reduce(function(t,e,a,n){return n[t].length>e.length?t:a},0)]);var a=e.chart.svg.append("g").attr("class","c9-custom-legend c9-custom-legend-container");e.item=a.selectAll("g.c9-custom-legend.c9-custom-legend-item").data(e.data).enter().append("g").attr("class","c9-custom-legend c9-custom-legend-item").attr("data-ref",function(t){return t["data-ref"]}).attr("data-enable",function(t){return t.enable}),e.item.append("rect").attr("class","c9-custom-legend c9-custom-legend-rect").attr("width",e.options.size).attr("height",e.options.size).attr("r",e.options.size).attr("fill",function(t){return t.color||t[0].color}).style("cursor","pointer"),e.item.append("rect").attr("width",5).attr("height",e.options.size).attr("x",e.options.size).attr("y",0).attr("opacity",0).style("cursor","pointer"),e.item.append("text").attr("class","c9-custom-legend c9-custom-legend-text").attr("x",e.options.size+5).attr("y",e.options.size).style("font-size",e.options.fontSize).style("font-weight",e.options.fontWeight).style("fill",e.options.fontColor).style("cursor","pointer").text(function(t){return"bar"==e.chart.chartType?t.group:t.name});var n=function(t){return t.getBoundingClientRect()},o=function(t){var e=d3.select(t).attr("transform").split(",");return{x:parseFloat(e[0].replace("translate(","")),y:parseFloat(e[1].replace(")",""))}},r=0,i=e.chart.svg.selectAll(".c9-custom-legend-item")[0],c=n(i[0]).height,s=Math.floor((e.maxHeight-e.options.margin[0]-e.options.margin[2])/(c+e.options.space));e.options.space>c&&s++;var l=new Array(Math.floor(i.length/s));i.forEach(function(t,e){var a=Math.floor(e/s),o=n(t).width;(void 0==l[a]||o>l[a])&&(l[a]=o)}),"bottom"==e.options.position?e.item.attr("transform",function(t,a){if(a>0){var s=i[a],l=i[a-1],u=Math.floor((o(l).x+n(l).width+e.options.space+n(s).width+e.options.margin[1])/e.maxWidth);return u>0&&r++,"translate("+(u>0?e.options.margin[3]:o(l).x+n(l).width+e.options.space)+","+(e.maxHeight-e.options.margin[0]-c-r*(c+e.options.space))+")"}return"translate("+e.options.margin[3]+","+(e.maxHeight-e.options.margin[0]-c)+")"}):"left"==e.options.position?e.item.attr("transform",function(t,a){var r=Math.floor(a/s);if(a>0){var c=Math.floor((a-1)/s),u=(i[a],i[a-1]);return"translate("+(r>c?l[r]+e.options.space+o(u).x:o(u).x)+","+(r>c?e.options.margin[0]:o(u).y+n(u).height+e.options.space)+")"}return"translate("+e.options.margin[3]+","+e.options.margin[0]+")"}):"right"==e.options.position?e.item.attr("transform",function(t,a){var r=Math.floor(a/s);if(a>0){var c=Math.floor((a-1)/s),u=(i[a],i[a-1]);return"translate("+(r>c?o(u).x-e.options.space-l[r]:o(u).x)+","+(r>c?e.options.margin[0]:o(u).y+n(u).height+e.options.space)+")"}return"translate("+(e.maxWidth-e.options.margin[3]-l[r])+","+e.options.margin[0]+")"}):e.item.attr("transform",function(t,a){if(a>0){var s=i[a],l=i[a-1],u=Math.floor((o(l).x+n(l).width+e.options.space+n(s).width+e.options.margin[1])/e.maxWidth);return u>0&&r++,"translate("+(u>0?e.options.margin[3]:o(l).x+n(l).width+e.options.space)+","+(e.options.margin[0]+r*(c+e.options.space))+")"}return"translate("+e.options.margin[3]+","+e.options.margin[0]+")"})}}},{key:"draw",value:function(){var t=this;t.update(t.chart.dataTarget)}},{key:"updateInteractionForLineChart",value:function(t){var e=this,a=t.hover.options,n=(t.hover.enable,a.onMouseOver.callback),o=a.onMouseOut.callback,r=t.click.callback;e.itemEventFactory={click:function(a){c["default"].isFunction(r)&&r.call(this,a);var n=d3.select(this),o=!0,i=e.data,s=d3.sum(i.map(function(t){return t.enable?1:0}));if("false"==n.attr("data-enable"))n.attr("data-enable",!0),n.style("opacity","1");else{if(2>s)return;n.attr("data-enable",!1),n.style("opacity","0.1"),o=!1}var l=[];t.dataTarget.forEach(function(t){t["data-ref"]==a["data-ref"]&&(t.enable=o),t.enable&&l.push(t)}),t.updateDomain(l),t.axis.update(t.x,t.y,750),t.update(l),t.options.subchart.show&&(t.subChartX.domain(t.x.domain()),t.subChartY.domain(t.y.domain()),t.svg.select(".c9-subchart-custom .c9-subchart-axis").transition().duration(750).call(t.subChartXAxis),t.updateSubChart(l)),t.updateOverlay(),t.updateInteraction()},mouseover:function(t){c["default"].isFunction(n)&&n.call(this,t);var a=d3.select(this);e.lightenLegendItem(a)},mouseout:function(t){c["default"].isFunction(o)&&o.call(this,t);var a=d3.select(this);e.normalizeLegendItem(a)}},e.options.show&&e.item.on(e.itemEventFactory)}},{key:"updateInteractionForDonutPieChart",value:function(t,e,a,n,o){var r=this,i=t.hover.options,s=(t.hover.enable,i.onMouseOver.callback),l=i.onMouseOut.callback,u=t.click.callback,f=t.chartType,d="pie"==f?0:t.options.innerRadius,p="pie"==f?t.options.radius:t.options.outerRadius,h="pie"==f?0:t.options.innerRadius,g="pie"==f?1.2*t.options.radius:1.2*t.options.outerRadius;r.itemEventFactory={click:function(a){c["default"].isFunction(u)&&u.call(this,a);var n=d3.select(this),i=!0,s=r.data,l=d3.sum(s.map(function(t){return t.enable?1:0}));if("false"==n.attr("data-enable"))n.attr("data-enable",!0),n.attr("opacity","1.0");else{if(2>l)return;n.attr("data-enable",!1),n.attr("opacity","0.1"),i=!1}r.item.each(function(){d3.select(this).attr("data-ref")!==a["data-ref"]&&"true"==d3.select(this).attr("data-enable")&&d3.select(this).attr("opacity","1.0")}),t.selectAllPath().each(function(){d3.select(this).attr("data-ref")!==a["data-ref"]&&d3.select(this).attr("opacity","1.0")}),t.pie.value(function(t){return t["data-ref"]==a["data-ref"]&&(t.enable=i),t.enable?t.value:0}),e=e.data(t.pie(s)),e.transition().duration(500).attrTween("d",function(e){var a=d3.interpolate(t.currentData,e);return t.currentData=a(0),function(t){return o(a(t))}}).attr("stroke","none")},mouseover:function(e){c["default"].isFunction(s)&&s.call(this,e);var a=d3.select(this);if(r.lightenLegendItem(a),a.attr("data-enable")){r.item.each(function(){d3.select(this).attr("data-ref")!==e["data-ref"]&&d3.select(this).attr("data-enable")&&d3.select(this).attr("opacity","0.3")}),t.selectAllPath().each(function(){d3.select(this).attr("data-ref")!==e["data-ref"]&&d3.select(this).attr("opacity","0.3")});var n=d3.select("path[data-ref='"+e["data-ref"]+"']");n.transition().duration(500).ease("bounce").attr("d",d3.svg.arc().innerRadius(h).outerRadius(g))}},mouseout:function(e){c["default"].isFunction(l)&&l.call(this,e);var a=d3.select(this);r.normalizeLegendItem(a),r.item.each(function(){d3.select(this).attr("data-ref")!==e["data-ref"]&&d3.select(this).attr("data-enable")&&d3.select(this).attr("opacity","1.0")}),t.selectAllPath().each(function(){d3.select(this).attr("data-ref")!==e["data-ref"]&&d3.select(this).attr("opacity","1.0")});var n=d3.select("path[data-ref='"+e["data-ref"]+"']");n.transition().duration(500).ease("bounce").attr("d",d3.svg.arc().innerRadius(d).outerRadius(p))}},r.options.show&&r.item.on(r.itemEventFactory)}},{key:"updateInteractionForBarChart",value:function(t){var e=this,a=t.hover.options,n=(t.hover.enable,a.onMouseOver.callback,a.onMouseOut.callback,t.click.callback);e.itemEventFactory={click:function(a){c["default"].isFunction(n)&&n.call(this,a);var o=d3.select(this),r=!0,i=t.dataTarget,s=e.data,l=d3.sum(s.map(function(t){return t.enable?1:0})),u=[],f=[],d=[];if("false"==o.attr("data-enable"))o.attr("data-enable","true"),o.style("opacity","1.0");else{if(2>l)return;o.attr("data-enable","false"),o.style("opacity","0.1"),r=!1}e.data.forEach(function(t,e){t.enable&&f.push(t.group),t.group==a.group&&(t.enable=r),t.enable&&u.push(t.group)}),i.forEach(function(e){var a=[],n=[];if(e.forEach(function(t){u.forEach(function(e,o){e==t.group&&(t.y0<0?a.push({e:t,s:o}):n.push({e:t,s:o}))})}),!t.isGroup){if(a.length>0){a[0].e.y1<0&&(a[0].e.y1=0);for(var o=1;o<a.length;o++)a[o].e.y1=a[o-1].e.y1+a[o-1].e.y0}if(n.length>0){n[0].e.y1-n[0].e.y0!=0&&(n[0].e.y1=n[0].e.y0);for(var o=1;o<n.length;o++)n[o].e.y1=n[o-1].e.y1+n[o].e.y0}}for(var r=new Array(a.length+n.length),o=0;o<a.length;o++)r[a[o].s]=a[o].e;for(var o=0;o<n.length;o++)r[n[o].s]=n[o].e;d.push(r)}),t.updateLegendInteraction(d,u,f,a.group)},mouseover:function(t){var a=d3.select(this);e.lightenLegendItem(a),"true"==a.attr("data-enable")&&d3.selectAll(".c9-custom-bar>.c9-custom-rect").filter(function(e){return e["group-ref"]!=t["group-ref"]}).attr("opacity",.3)},mouseout:function(t){var a=d3.select(this);e.normalizeLegendItem(a),d3.selectAll(".c9-custom-bar>.c9-custom-rect").filter(function(e){return e["group-ref"]!=t["group-ref"]}).attr("opacity",1)}},e.options.show&&e.item.on(e.itemEventFactory)}},{key:"lightenLegendItem",value:function(t){var e=this;t.select(".c9-custom-legend-rect").attr("fill",function(t){return c["default"].shadeColor(.5,t.color||t[0].color)}),t.select(".c9-custom-legend-text").style("fill",function(t){return c["default"].shadeColor(-.5,e.options.fontColor)})}},{key:"normalizeLegendItem",value:function(t){var e=this;t.select(".c9-custom-legend-rect").attr("fill",function(t){return t.color||t[0].color}),t.select(".c9-custom-legend-text").style("fill",function(t){return e.options.fontColor})}},{key:"options",get:function(){return this._options},set:function(t){t&&(this._options=t)}},{key:"data",get:function(){return this._data},set:function(t){t&&(this._data=t)}},{key:"chart",get:function(){return this._chart},set:function(t){t&&(this._chart=t)}},{key:"item",get:function(){return this._item},set:function(t){t&&(this._item=t)}},{key:"itemEventFactory",get:function(){return this._itemEventFactory},set:function(t){t&&(this._itemEventFactory=t)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(t){t&&(this._maxWidth=t)}},{key:"maxHeight",get:function(){return this._maxHeight},set:function(t){t&&(this._maxHeight=t)}}]),t}();e["default"]=s},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),i=a(1),c=n(i),s=function(){function t(e,a){o(this,t);var n=this,r={container:"body",show:!1,headings:["Name","Value"],style:"default",serial:!0,hover:{enable:!0,callback:null},click:{enable:!0,callback:null}};n._options=e,n._chart=a,n.updateConfig(r)}return r(t,[{key:"updateConfig",value:function(t){var e=this;e.options=c["default"].mergeDeep(t,e.options)}},{key:"update",value:function(t){var e=this;if("bar"==e.chart.chartType||"line"==e.chart.chartType?(e.options.headings.length<3&&!t[0].value&&void 0!=t[0][0]["group-ref"]&&e.options.headings.push("Group"),e.data=[],t.forEach(function(t){(c["default"].isArray(t)?t:t.value).forEach(function(t){e.data.push(t)})})):e.data=t,e.options.show){d3.selectAll(".c9-table").remove(),d3.selectAll(".c9-table-container").remove();var a=d3.select("body"!==e.options.container?"#"+e.options.container:"body").append("table").attr("class","c9-table c9-table-header"),n=a.append("thead"),o=d3.select("body"!==e.options.container?"#"+e.options.container:"body").append("div").attr("class","c9-table-container").append("table").attr("class",function(){return e.getTableStyle()}),r=o.append("tbody"),i=n.append("tr");e.options.serial&&i.append("th").text("#"),i.selectAll("thead").data(e.options.headings).enter().append("th").text(function(t){return t});var s=r.selectAll("tr").data(e.data).enter().append("tr").attr("data-ref",function(t){return t["data-ref"]});e.options.serial&&s.append("td").text(function(t,e){return e+1}),s.append("td").text(function(t){return t.name}),s.append("td").text(function(t){return t.value||t.y0||t.valueY}),"bar"==e.chart.chartType&&e.options.headings.length<3&&!t[0].value&&void 0!=t[0][0]["group-ref"]&&s.append("td").text(function(t){return t.group})}}},{key:"draw",value:function(){var t=this;t.update(t.chart.dataTarget)}},{key:"updateInteractionForBarChart",value:function(t){var e=this,a=t.hover.options,n=(t.hover.enable,a.callback,a.onMouseOut.callback,t.click.callback);e.itemEventFactory={click:function(t){c["default"].isFunction(n)&&n.call(this,t)},mouseover:function(t){if(t){var e=d3.select(this);e.style("cursor","pointer"),d3.selectAll(".c9-custom-bar>.c9-custom-rect").filter(function(e){return e["data-ref"]!=t["data-ref"]}).attr("opacity",.3)}},mouseout:function(t){t&&(d3.select(this).style("cursor","pointer"),d3.selectAll(".c9-custom-bar>.c9-custom-rect").filter(function(e){return e["data-ref"]!=t["data-ref"]}).attr("opacity",1))}},e.options.show&&e.selectAllRow().on(e.itemEventFactory)}},{key:"updateInteractionForDonutPieChart",value:function(t){var e=this,a=t.hover.options,n=(t.hover.enable,a.callback),o=a.onMouseOut.callback,r=t.click.callback,i=t.chartType,s="pie"==i?0:t.options.innerRadius,l="pie"==i?t.options.radius:t.options.outerRadius,u="pie"==i?0:t.options.innerRadius,f="pie"==i?1.2*t.options.radius:1.2*t.options.outerRadius;e.itemEventFactory={click:function(t){c["default"].isFunction(r)&&r.call(this,t)},mouseover:function(e){if(e){c["default"].isFunction(n)&&n.call(this,e);var a=d3.select(this);a.style("cursor","pointer"),t.selectAllPath().each(function(){d3.select(this).attr("data-ref")!==e["data-ref"]&&d3.select(this).attr("opacity","0.3")});var o=d3.select("path[data-ref='"+e["data-ref"]+"']");o.transition().duration(500).ease("bounce").attr("d",d3.svg.arc().innerRadius(u).outerRadius(f))}},mouseout:function(e){if(e){c["default"].isFunction(o)&&o.call(this,e);var a=d3.select(this);a.style("cursor","pointer"),t.selectAllPath().each(function(){d3.select(this).attr("data-ref")!==e["data-ref"]&&d3.select(this).attr("opacity","1.0")});var n=d3.select("path[data-ref='"+e["data-ref"]+"']");n.transition().duration(500).ease("bounce").attr("d",d3.svg.arc().innerRadius(s).outerRadius(l))}}},e.options.show&&e.selectAllRow().on(e.itemEventFactory)}},{key:"selectAllRow",value:function(){return d3.selectAll(".c9-table tr")}},{key:"getTableStyle",value:function(){var t=this;return"default"===t.options.style?"c9-table c9-table-body":"stripe"===t.options.style?"c9-table c9-table-body c9-stripe":void 0}},{key:"data",get:function(){return this._data},set:function(t){t&&(this._data=t)}},{key:"chart",get:function(){return this._chart},set:function(t){t&&(this._chart=t)}},{key:"options",get:function(){return this._options},set:function(t){t&&(this._options=t)}}]),t}();e["default"]=s},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),i=a(1),c=n(i),s=function(){function t(e,a){o(this,t);var n=this,r={show:!0,text:"Sample Chart",position:"top",fontSize:"14px"};n._options=e,n._chart=a,n.updateConfig(r)}return r(t,[{key:"updateConfig",value:function(t){var e=this;e.options=c["default"].mergeDeep(t,e.options)}},{key:"draw",value:function(){var t=this;if(t.options.show){var e=t.chart.svg.append("g").attr("class","c9-custom-title c9-custom-title-container").append("text").attr("class","c9-custom-title c9-custom-title-text");e.attr("x",(t.chart.width-e.node().getComputedTextLength())/2).attr("y",t.setYLocation(t.chart.height,t.chart.margin)).attr("text-anchor","middle").style("font-size",t.options.fontSize).text(t.options.text)}}},{key:"setYLocation",value:function(t,e){var a=this;return"top"===a.options.position?e.top/2:"bottom"===a.options.position?t-e.bottom/2:void 0}},{key:"chart",get:function(){return this._chart},set:function(t){t&&(this._chart=t)}},{key:"options",get:function(){return this._options},set:function(t){t&&(this._options=t)}}]),t}();e["default"]=s},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),s=function T(t,e,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:T(o,e,a)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(a)},l=a(4),u=n(l),f=a(5),d=n(f),p=a(8),h=n(p),g=a(6),y=n(g),m=a(7),v=n(m),b=a(3),k=n(b),x=a(1),w=n(x),_=a(2),C=n(_),O=function(t){function e(t){o(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n=a;return n.config={isLogaric:!1},a}return i(e,t),c(e,[{key:"updateConfig",value:function(t,a){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateConfig",this).call(this,t);var n=this;n.options=w["default"].mergeDeep(t,n.options),n.chartType="bar";var o=n.dataOption;o.colorRange=n.colorRange;var r=new C["default"](o,n.chartType,null);r.getDataTarget(n.chartType,function(t){n.dataTarget=t;var e=r.getDataTypeForBarChart();"single"!=e&&(n._groupNames=r.groups.length>0?r.groups:r.stacks,n._isGroup="group"==e);var o=n.width-n.margin.left-n.margin.right,i=n.height-n.margin.top-n.margin.bottom,c=d3.scale.ordinal().rangeRoundBands([0,o],.1),s=n.options.isLogaric?d3.scale.log().range([i,0]):d3.scale.linear().range([i,0]),l=w["default"].getMinMax(n.dataTarget,e,n.options.isLogaric);c.domain(n.dataTarget.map(function(t){return t[0].name})),s.domain([l.min,l.max]),n.groupNames&&(n.xGroup=d3.scale.ordinal(),n.xGroup.domain(n.groupNames).rangeRoundBands([0,c.rangeBand()])),n.x=c,n.y=s,w["default"].isFunction(a)&&a.call(n,n.dataTarget)})}},{key:"updateDataConfig",value:function(t,e){var a=this;a.options=w["default"].mergeDeep(a.options,t);var n=a.dataOption;n.colorRange=a.colorRange;var o=new C["default"](n,a.chartType,null);o.getDataTarget(a.chartType,function(t){a.dataTarget=t;var n=o.getDataTypeForBarChart();"single"!=n&&(a._groupNames=o.groups.length>0?o.groups:o.stacks,a._isGroup="group"==n);var r=a.width-a.margin.left-a.margin.right,i=a.height-a.margin.top-a.margin.bottom,c=d3.scale.ordinal().rangeRoundBands([0,r],.1),s=a.options.isLogaric?d3.scale.log().range([i,0]):d3.scale.linear().range([i,0]),l=w["default"].getMinMax(a.dataTarget,n,a.options.isLogaric);c.domain(a.dataTarget.map(function(t){return t[0].name})),s.domain([l.min,l.max]),a.groupNames&&(a.xGroup=d3.scale.ordinal(),a.xGroup.domain(a.groupNames).rangeRoundBands([0,c.rangeBand()])),a.x=c,a.y=s,w["default"].isFunction(e)&&e.call(a,a.dataTarget)})}},{key:"update",value:function(t){var e=this;e.body.selectAll(".c9-chart-bar.c9-custom-rect").data([]).exit().remove(),e.body.selectAll(".c9-chart-bar.c9-custom-bar").data([]).exit().remove();var a=e.colorRange,n=e.x,o=e.y,r=e.xGroup,i=e.body.selectAll(".c9-chart-bar.c9-custom-bar").data(t).enter().append("g").attr("class","c9-chart-bar c9-custom-bar").attr("transform",function(t){return"translate("+n(t[0].name)+",0)"}),c=i.selectAll(".c9-chart-bar.c9-custom-rect").data(function(t){return t});c.enter().append("rect").attr("class","c9-chart-bar c9-custom-rect").style("fill",function(t,e){return t.color||a(e)}).attr("x",function(t){return e.isGroup?r(t.group):void 0}).attr("y",function(t){return o(t.y1)}).attr("width",function(t){return e.isGroup?r.rangeBand():n.rangeBand()}).attr("height",function(t){return e.options.isLogaric?o(o.domain()[0])-o(t.y0):o(0)-o(Math.abs(t.y0))}),e.updateInteraction()}},{key:"updateLegendInteraction",value:function(t,e,a,n){var o=this,r=(o.groupType,o.y),i=w["default"].getMinMax(t,0==o.isGroup?"stack":null,o.options.isLogaric);r.domain([i.min,i.max]),o.axis.update(null,r,750);var c=d3.scale.ordinal();c.domain(e).rangeRoundBands([0,o.x.rangeBand()]);var s=d3.scale.ordinal();s.domain(a).rangeRoundBands([0,o.x.rangeBand()]);var l=void 0;e.length>a.length&&0<e.indexOf(n)&&e.indexOf(n)<e.length-1&&(l=a[e.indexOf(n)]),o.body.selectAll(".c9-chart-bar.c9-custom-rect").data([]).exit().remove(),o.body.selectAll(".c9-chart-bar.c9-custom-bar").data([]).exit().remove();var u=o.body.selectAll(".c9-chart-bar.c9-custom-bar").data(t).enter().append("g").attr("class","c9-chart-bar c9-custom-bar").attr("transform",function(t,e){return"translate("+o.x(o.dataTarget[e][0].name)+",0)"}),f=u.selectAll(".c9-custom-rect").data(function(t){return t});f.enter().append("rect").attr("class","c9-chart-bar c9-custom-rect").style("fill",function(t){return t.color}).attr("x",function(t){return o.isGroup?e.length>a.length&&t.group==n&&e.indexOf(n)==e.length-1?o.x.rangeBand():s(l?t.group==n?l:t.group:t.group):void 0}).attr("y",function(t){return r(o.isGroup?t.y1:o.options.isLogaric?r.domain()[1]:0)}).attr("width",function(t){return o.isGroup?t.group==n?0:s.rangeBand():o.x.rangeBand()}).attr("height",function(t){return o.options.isLogaric?r(r.domain()[0])-r(t.y0):o.isGroup?r(0)-r(Math.abs(t.y0)):0}),f.transition().duration(750).attr("x",function(t){return o.isGroup?c(t.group):void 0}).attr("width",function(t){return o.isGroup?c.rangeBand():o.x.rangeBand()}).attr("y",function(t){return r(t.y1)}).attr("height",function(t){return o.options.isLogaric?r(r.domain()[0])-r(t.y0):r(0)-r(Math.abs(t.y0))}),o.updateInteraction()}},{key:"retrieveValue",value:function(t,e){var a=Math.floor(t)===t?0:t.toString().split(".")[1].length,n=Math.floor(e)===e?0:e.toString().split(".")[1].length;return a>n?(e-t).toFixed(a):(e-t).toFixed(n)}},{key:"selectAllBar",value:function(){var t=this;return t.body.selectAll(".c9-custom-rect")}},{key:"updateInteraction",value:function(){var t=this,e=t.hover.enable,a=t.hover.options,n=t.selectAllBar(),o=a.onMouseOver.callback,r=a.onMouseOut.callback,i=t.click.callback,c=new k["default"](t.options.tooltip);t.eventFactory={click:function(t){w["default"].isFunction(i)&&i.call(this,t)},mouseover:function(a){if(e){if(w["default"].isFunction(o)&&o.call(this,a),t.options.table.show){var n=d3.selectAll(".c9-table-container>.c9-table-body tr");n.filter(function(t){return t["data-ref"]!=a["data-ref"]}).selectAll("td").style("opacity","0.5");var r=n.filter(function(t){return t["data-ref"]==a["data-ref"]});r.selectAll("td").style("opacity","1"),w["default"].scroll(d3.select(".c9-table-container")[0][0],r[0][0].offsetTop,200)}d3.select(this).style("fill",function(e,a){return t.getLightenColor(e.color||color(a))}),c.draw(a,t,"mouseover")}},mouseout:function(a){e&&(w["default"].isFunction(r)&&r.call(this,a),t.options.table.show&&d3.selectAll(".c9-table-container>.c9-table-body tr").selectAll("td").style("opacity",""),d3.select(this).style("fill",function(t,e){return t.color||color(e)}),c.draw(a,t,"mouseout"))}},n.on(t.eventFactory)}},{key:"on",value:function(t,a){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"on",this).call(this,t,a);var n=this,o=n.selectAllBar(),r={"click.event":function(t){w["default"].isFunction(a)&&a.call(this,t)},"mouseover.event":function(t){w["default"].isFunction(a)&&a.call(this,t)},"mouseout.event":function(t){w["default"].isFunction(a)&&a.call(this,t)}},i=t+".event";o.on(i,r[i])}},{key:"draw",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"draw",this).call(this);var t=this;t.updateConfig(t.config,function(e){var a=new d["default"](t.options.axis,t,t.width-t.margin.left-t.margin.right,t.height-t.margin.top-t.margin.bottom),n=new h["default"](t.options.title,t),o=new y["default"](t.options.legend,t,t.dataTarget),r=new v["default"](t.options.table,t,t.dataTarget);t.axis=a,t.title=n,t.table=r,t.legend=o,t.update(e),t.updateInteraction(),t.title.draw(),t.legend.draw(),t.legend.updateInteractionForBarChart(t),t.table.draw(),t.table.updateInteractionForBarChart(t)})}},{key:"setOption",value:function(t,a){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOption",this).call(this,t,a);var n=this;w["default"].set(t,a,n.options),n.updateConfig(n.options)}},{key:"updateData",value:function(t,e){var a=this,n={};w["default"].isEmpty(e)?n.data={plain:t}:n.data={plain:t,keys:e},a.updateDataConfig(n,function(t){a.update(t),a.axis.update(a.x,a.y,100),a.legend.update(t),a.legend.updateInteractionForBarChart(a),a.table.update(t)})}},{key:"groupType",get:function(){return this._groupType},set:function(t){t&&(this._groupType=t)}},{key:"xGroup",get:function(){return this._xGroup},set:function(t){t&&(this._xGroup=t)}},{key:"groupNames",get:function(){return this._groupNames},set:function(t){t&&(this._groupNames=t)}},{key:"isGroup",get:function(){return this._isGroup},set:function(t){t&&(this._isGroup=t)}}]),e}(u["default"]);e["default"]=O},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),s=function O(t,e,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:O(o,e,a)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(a)},l=a(4),u=n(l),f=a(5),d=(n(f),a(8)),p=n(d),h=a(6),g=n(h),y=a(7),m=n(y),v=a(3),b=n(v),k=a(1),x=n(k),w=a(2),_=n(w),C=function(t){function e(t){o(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n=a,i=Math.min(n.width-n.margin.left-n.margin.right,n.height-n.margin.top-n.margin.bottom)/2;return n.config={outerRadius:i,innerRadius:i>80?i-80:i-40},a}return i(e,t),c(e,[{key:"updateConfig",value:function(t,a){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateConfig",this).call(this,t);var n=this;n.options=x["default"].mergeDeep(t,n.options),n.chartType="donut";var o=n.dataOption;o.colorRange=n.colorRange;var r=new _["default"](o,n.chartType,null);r.getDataTarget(n.chartType,function(t){n.dataTarget=t,x["default"].isFunction(a)&&a.call(n,n.dataTarget)})}},{key:"updateDataConfig",value:function(t,e){var a=this;a.options=x["default"].mergeDeep(a.options,t),a.chartType="donut";var n=a.dataOption;n.colorRange=a.colorRange;var o=new _["default"](n,a.chartType,null);o.getDataTarget(a.chartType,function(t){a.dataTarget=t,x["default"].isFunction(e)&&e.call(a,a.dataTarget)})}},{key:"update",value:function(t){var e=this,a=e.width-e.margin.left-e.margin.right,n=e.height-e.margin.top-e.margin.bottom,o=e.colorRange;e.arc=d3.svg.arc().outerRadius(e.options.outerRadius).innerRadius(e.options.innerRadius),e.pie=d3.layout.pie().sort(null).value(function(t){
return t.value}),e.body.selectAll(".c9-chart-donut.c9-custom-arc-container").data([]).exit().remove();var r=e.body.append("g").attr("class","c9-chart-donut c9-custom-arc-container").attr("transform","translate("+a/2+","+n/2+")").selectAll(".c9-chart-donut.c9-custom-arc").data(e.pie(t)).enter().append("g").attr("class","c9-chart-donut c9-custom-arc");r.append("path").attr("class","c9-chart-donut c9-custom-path").attr("data-ref",function(t){return t.data["data-ref"]}).attr("d",e.arc).attr("fill",function(t,e){return o(e)}).attr("stroke","#ffffff").each(function(t){e.currentData=t}),e.updateInteraction()}},{key:"selectAllPath",value:function(){var t=this;return t.body.selectAll("path.c9-chart-donut.c9-custom-path")}},{key:"updateInteraction",value:function(){var t=this,e=t.selectAllPath(),a=(t.width-t.margin.left-t.margin.right,t.height-t.margin.top-t.margin.bottom,t.colorRange,t.options.innerRadius),n=t.options.outerRadius,o=t.options.innerRadius,r=1.2*t.options.outerRadius,i=t.hover.options,c=t.hover.enable,s=i.onMouseOver.callback,l=i.onMouseOut.callback,u=t.click.callback,f=new b["default"](t.options.tooltip);t._eventFactory={click:function(t,e){x["default"].isFunction(u)&&u.call(this,t)},mouseover:function(e,a){if(c){x["default"].isFunction(s)&&s.call(this,e);var n=d3.select(this);if(n.transition().attr("d",d3.svg.arc().innerRadius(o).outerRadius(r)),t.options.legend.show&&t.legend.item.each(function(){d3.select(this).attr("data-ref")!==e.data["data-ref"]&&"true"==d3.select(this).attr("data-enable")&&d3.select(this).attr("opacity","0.3")}),t.options.table.show){var i=d3.selectAll(".c9-table-container>.c9-table-body tr");i.filter(function(t){return t["data-ref"]!=e.data["data-ref"]}).selectAll("td").style("opacity","0.5");var l=i.filter(function(t){return t["data-ref"]==e.data["data-ref"]});l.selectAll("td").style("opacity","1"),x["default"].scroll(d3.select(".c9-table-container")[0][0],l[0][0].offsetTop,200)}t.selectAllPath().each(function(){d3.select(this).attr("data-ref")!==e.data["data-ref"]&&d3.select(this).attr("opacity","0.3")}),f.draw(e,t,"mouseover")}},mouseout:function(e,o){if(c){x["default"].isFunction(l)&&l.call(this,e);var r=d3.select(this);r.transition().duration(500).ease("bounce").attr("d",d3.svg.arc().innerRadius(a).outerRadius(n)),t.options.legend.show&&t.legend.item.each(function(){d3.select(this).attr("data-ref")!==e.data["data-ref"]&&"true"==d3.select(this).attr("data-enable")&&d3.select(this).attr("opacity","1.0")}),t.options.table.show&&d3.selectAll(".c9-table-container>.c9-table-body tr").selectAll("td").style("opacity",""),t.selectAllPath().each(function(){d3.select(this).attr("data-ref")!==e.data["data-ref"]&&d3.select(this).attr("opacity","1.0")}),f.draw(e,t,"mouseout")}}},e.on(t._eventFactory)}},{key:"on",value:function(t,a){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"on",this).call(this,t,a);var n=this,o=n.selectAllPath(),r={"click.event":function(t){x["default"].isFunction(a)&&a.call(this,t)},"mouseover.event":function(t){x["default"].isFunction(a)&&a.call(this,t)},"mouseout.event":function(t){x["default"].isFunction(a)&&a.call(this,t)}},i=t+".event";o.on(i,r[i])}},{key:"draw",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"draw",this).call(this);var t=this;t.updateConfig(t.config,function(e){var a=new p["default"](t.options.title,t),n=new g["default"](t.options.legend,t,t.dataTarget),o=new m["default"](t.options.table,t,t.dataTarget);t.title=a,t.legend=n,t.table=o,t.title.draw(),t.update(t.dataTarget),t.updateInteraction(),t.legend=n,t.table=o,t.legend.draw(),t.legend.updateInteractionForDonutPieChart(t,t.selectAllPath(),t.pie,t.currentData,t.arc),t.table.draw(),t.table.updateInteractionForDonutPieChart(t)})}},{key:"setOption",value:function(t,a){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOption",this).call(this,t,a);var n=this;x["default"].set(t,a,n.options),n.updateConfig(n.options)}},{key:"updateData",value:function(t,e){var a=this,n={};x["default"].isEmpty(e)?n.data={plain:t}:n.data={plain:t,keys:e},a.updateDataConfig(n,function(t){a.update(t),a.legend.update(t),a.legend.updateInteractionForDonutPieChart(a,a.selectAllPath(),a.pie,a.currentData,a.arc),a.table.update(t),a.table.updateInteractionForDonutPieChart(a)})}},{key:"pie",get:function(){return this._pie},set:function(t){t&&(this._pie=t)}},{key:"arc",get:function(){return this._arc},set:function(t){t&&(this._arc=t)}},{key:"currentData",get:function(){return this._currentData},set:function(t){t&&(this._currentData=t)}}]),e}(u["default"]);e["default"]=C},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),s=function T(t,e,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:T(o,e,a)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(a)},l=a(4),u=n(l),f=a(5),d=n(f),p=a(8),h=n(p),g=a(6),y=n(g),m=a(7),v=n(m),b=a(3),k=n(b),x=a(1),w=n(x),_=a(2),C=n(_),O=function(t){function e(t){o(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n=a;return n.config={point:{show:!0,fill:"steelblue",stroke:"steelblue","stroke-width":1,opacity:1,radius:5},area:{show:!0},line:{style:"solid",width:2},interpolate:"linear"},a}return i(e,t),c(e,[{key:"updateConfig",value:function(t,a){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateConfig",this).call(this,t);var n=this;n.options=w["default"].mergeDeep(t,n.options),n.chartType="line",n.bisectDate=d3.bisector(function(t){return t.valueX}).left;var o=n.dataOption;o.colorRange=n.colorRange;var r=new C["default"](o,n.chartType,null);r.getDataTarget(n.chartType,function(t){n.dataTarget=t,n.isTimeDomain=r.timeFormat;var e=n.width-n.margin.left-n.margin.right,o=n.height-n.margin.top-n.margin.bottom;n.x=n.isTimeDomain?d3.time.scale().range([0,e]):d3.scale.linear().range([0,e]),n.y=d3.scale.linear().range([o,0]),n.updateDomain(n.dataTarget),n.lineGen=d3.svg.line().x(function(t){return n.x(t.valueX)}).y(function(t){return n.y(t.valueY)}).interpolate(n.options.interpolate),n.areaGen=d3.svg.area().x(function(t){return n.x(t.valueX)}).y0(function(t){return n.y(t.valueY)}).y1(o).interpolate(n.options.interpolate),w["default"].isFunction(a)&&a.call(n,n.dataTarget)})}},{key:"updateDataConfig",value:function(t,e){var a=this;a.options=w["default"].mergeDeep(a.options,t),a.chartType="line",a.bisectDate=d3.bisector(function(t){return t.valueX}).left;var n=a.dataOption;n.colorRange=a.colorRange;var o=new C["default"](n,a.chartType,null);o.getDataTarget(a.chartType,function(t){a.dataTarget=t,a.isTimeDomain=o.timeFormat;var n=a.width-a.margin.left-a.margin.right,r=a.height-a.margin.top-a.margin.bottom;a.x=a.isTimeDomain?d3.time.scale().range([0,n]):d3.scale.linear().range([0,n]),a.y=d3.scale.linear().range([r,0]),a.updateDomain(a.dataTarget),a.lineGen=d3.svg.line().x(function(t){return a.x(t.valueX)}).y(function(t){return a.y(t.valueY)}).interpolate(a.options.interpolate),a.areaGen=d3.svg.area().x(function(t){return a.x(t.valueX)}).y0(function(t){return a.y(t.valueY)}).y1(r).interpolate(a.options.interpolate),w["default"].isFunction(e)&&e.call(a,a.dataTarget)})}},{key:"updateOverlay",value:function(){var t=this,e=t.width-t.margin.left-t.margin.right,a=t.height-t.margin.top-t.margin.bottom,n=.01*(t.x.domain()[1]-t.x.domain()[0]);.05*(t.y.domain()[1]-t.y.domain()[0]);t.body.selectAll(".c9-chart-line.c9-rect-overlay").remove(),t.body.append("rect").attr("class","c9-chart-line c9-rect-overlay").attr("width",e-t.x(n)).attr("height",a).attr("x",t.x(n)/2).style("fill","none").style("pointer-events","all")}},{key:"updateHoverLine",value:function(){var t=this;t.hoverLine=t.body.append("g").attr("class","c9-chart-line c9-comparator-line").append("line").style("stroke","grey").style("stroke-opacity",0),t.hoverCircle=t.hoverLine.append("circle").attr("class","c9-chart-line c9-comparator-line").attr("r",t.options.point.radius)}},{key:"updateDomain",value:function(t){var e=this,a=d3.merge(t.map(function(t){return t.value.map(function(t){return t.valueX})})),n=d3.merge(t.map(function(t){return t.value.map(function(t){return t.valueY})}));if(e.x.domain(d3.extent(a)),e.y.domain(d3.extent(n)),e.y.domain()[0]>0&&e.y.domain()[1]>0?e.y.domain([0,e.y.domain()[1]]):e.y.domain()[0]<0&&e.y.domain()[1]<0&&e.y.domain([e.y.domain()[0],0]),!e.isTimeDomain){var o=e.x.domain(),r=.01*(e.x.domain()[1]-e.x.domain()[0]),i=e.y.domain(),c=.05*(e.y.domain()[1]-e.y.domain()[0]);e.x.domain([o[0]-r,o[1]+r]),e.y.domain([i[0],i[1]+c])}}},{key:"update",value:function(t){var e=this;e.width-e.margin.left-e.margin.right,e.height-e.margin.top-e.margin.bottom;if(e.updateDomain(t),e.body.selectAll(".c9-chart-line.c9-area-container").data([]).exit().remove(),e.body.selectAll(".c9-chart-line.c9-path-container").data([]).exit().remove(),e.body.selectAll(".c9-chart-line.c9-point-container").data([]).exit().remove(),e.options.area.show){var a=e.body.append("g").attr("class","c9-chart-line c9-area-container").attr("clip-path","url(#clip)");a.selectAll(".c9-chart-line.c9-path-area-custom").data(t).enter().append("path").filter(function(t){return t.enable}).attr("class","c9-chart-line c9-path-area-custom").attr("d",function(t){return e.areaGen(t.value)}).attr("data-ref",function(t){return"c9-"+t["data-ref"]}).style("fill",function(t){return t.color}).style("stroke","none").style("opacity","0.5")}var n=e.body.append("g").attr("class","c9-chart-line c9-path-container").attr("clip-path","url(#clip)");if(n.selectAll(".c9-chart-line.c9-path-line-custom").data(t).enter().append("path").filter(function(t){return t.enable}).attr("class","c9-chart-line c9-path-line-custom").attr("d",function(t){return e.lineGen(t.value)}).attr("data-ref",function(t){return"c9-"+t["data-ref"]}).style("stroke",function(t){return t.color}).style("stroke-dasharray",function(){return e.getLineStyle()}).style("stroke-width",e.options.line.width).style("fill","none"),e.options.point.show){var o=e.body.append("g").attr("class","c9-chart-line c9-point-container").attr("clip-path","url(#clip)");t.forEach(function(t){t.enable&&o.selectAll(".c9-chart-line.c9-point-container").data(t.value).enter().append("circle").attr("class","c9-chart-line c9-circle-custom").attr("r",e.options.point.radius).attr("cx",function(t){return e.x(t.valueX)}).attr("cy",function(t){return e.y(t.valueY)}).attr("data-ref",function(t){return t["data-ref"]}).style("fill",e.options.point.fill).style("stroke",e.options.point.stroke).style("stroke-width",e.options.point["stroke-width"]).style("opacity",e.options.point.opacity)})}var r=e.body.node().getBBox();e.actualWidth=r.width-4*e.options.point.radius,e.actualHeight=r.height,e.updateInteraction()}},{key:"updateSubChart",value:function(t){var e=this;if(e.options.subchart.show){var a=e.width-e.margin.left-e.margin.right;e.height-e.margin.top-e.margin.bottom;e.subChartWidth=a,e.subChartHeight=e.options.subchart.height,w["default"].isEmpty(e.subChartMargin)&&(e.subChartMargin={top:e.actualHeight+100,left:e.margin.left}),e.subChartX=e._isTimeDomain?d3.time.scale().range([0,e.subChartWidth]):d3.scale.linear().range([0,e.subChartWidth]),e.subChartY=d3.scale.linear().range([e.subChartHeight,0]),e.subChartX.domain(e.x.domain()),e.subChartY.domain(e.y.domain()),e.subChartXAxis=d3.svg.axis().scale(e.subChartX).orient("bottom"),e.brush=d3.svg.brush().x(e.subChartX).on("brush",function(){e.x.domain(e.brush.empty()?e.subChartX.domain():e.brush.extent()),e.axis.update(e.x,e.y,500),e.options.area.show&&e.body.selectAll("path.c9-chart-line.c9-path-area-custom").attr("d",function(t){return e.areaGen(t.value)}),e.body.selectAll("path.c9-chart-line.c9-path-line-custom").attr("d",function(t){return e.lineGen(t.value)}),e.options.point.show&&e.body.selectAll("circle.c9-chart-line.c9-circle-custom").attr("cx",function(t){return e.x(t.valueX)}).attr("cy",function(t){return e.y(t.valueY)})}),e.subChartAreaGen=d3.svg.area().x(function(t){return e.subChartX(t.valueX)}).y0(function(t){return e.subChartY(t.valueY)}).y1(e.subChartHeight).interpolate(e.options.interpolate),e.svg.attr("height",e.height+e.subChartHeight),e.svg.selectAll(".c9-subchart-custom").remove(),e.svg.selectAll(".c9-subchart-custom .c9-subchart-axis").remove();var n=e.svg.append("g").attr("class","c9-subchart-custom").attr("transform","translate("+e.subChartMargin.left+","+e.subChartMargin.top+")"),o=n.append("g").attr("class","c9-subchart-custom c9-subchart-area-container").attr("clip-path","url(#clip)");t.forEach(function(t,a){t.enable&&o.append("path").attr("class","c9-subchart-area").attr("d",function(){return e.subChartAreaGen(t.value)}).attr("data-ref","c9-"+t["data-ref"]).style("fill",t.color).style("stroke","none").style("opacity","0.5")}),n.append("g").attr("class","c9-subchart-axis").attr("transform","translate(0,"+e.subChartHeight+")").call(e.subChartXAxis),n.append("g").attr("class","c9-subchart-brush").call(e.brush).selectAll("rect").attr("height",e.subChartHeight)}}},{key:"selectAllCircle",value:function(){var t=this;return t.body.selectAll("circle.c9-chart-line.c9-circle-custom")}},{key:"selectRectLayer",value:function(){return d3.selectAll("svg rect.c9-chart-line.c9-rect-overlay")}},{key:"updateInteraction",value:function(){var t=this,e=t.selectRectLayer(),a=t.hover.enable,n=t.hover.options,o=(n.onMouseOver.callback,n.onMouseOut.callback,n.onMouseMove.callback),r=(t.click.callback,new k["default"](t.options.tooltip));t.eventFactory={mouseout:function(e){a&&(t.hoverLine.style("stroke-opacity",0),t.selectAllCircle()[0].forEach(function(e){d3.select(e).style("fill",t.options.point.fill).style("fill-opacity",t.options.point.opacity)}),r.draw(e,t,"mouseout"))},mousemove:function(e){if(a){var n=d3.mouse(this),i=n[0],c=(n[1],t.x.invert(i)),s=[],l=[];t.dataTarget.forEach(function(e,a){s[a]=e.value,s[a].sort(function(t,e){return t.valueX-e.valueX});var n,o,r=t._isTimeDomain?t.bisectDate(s[a],new Date(c)):t.bisectDate(s[a],c);n=0===r?s[a][r]:s[a][r-1],o=w["default"].isEmpty(s[a][r])?s[a][r-1]:s[a][r],n=-1===t.checkBoundary(n.valueX)?o:n,o=1===t.checkBoundary(o.valueX)?n:o,l[a]=c-n.valueX>o.valueX-c?o:n}),w["default"].isFunction(o)&&o.call(this,l);var u=t.x(w["default"].isEmpty(l[0].valueX)?l[1].valueX:l[0].valueX);t.y(w["default"].isEmpty(l[0].valueY)?l[1].valueY:l[0].valueY);t.selectAllCircle()[0].forEach(function(e){d3.select(e).style("fill",t.options.point.fill).style("fill-opacity",t.options.point.opacity)});for(var f=0;f<l.length;f++){var d=d3.select("circle[data-ref='"+l[f]["data-ref"]+"']");d.style("fill",t.getLightenColor(t.options.point.fill)).style("fill-opacity",1)}t.hoverLine.attr("x1",u).attr("y1",t.y(t.y.domain()[0])).attr("x2",u).attr("y2",t.y(t.y.domain()[1])).style("stroke-opacity",1),r.draw(l,t,"mousemove")}}},e.on(t.eventFactory)}},{key:"getLineStyle",value:function(){var t=this,e=void 0;switch(t.options.line.style){case"dot":e="1, 1";break;case"solid":e="none";break;case"dash":e="3, 3";break;default:e="none"}return e}},{key:"checkBoundary",value:function(t){var e=this,a=e.width-e.margin.left-e.margin.right,n=e.x(t);return 0>n?-1:n>a?1:0}},{key:"on",value:function(t,a){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"on",this).call(this,t,a);var n=this,o=n.selectRectLayer(),r={"mousemove.event":function(t){var e=d3.mouse(this),o=e[0],r=(e[1],n.x.invert(o)),i=[],c=[];n.dataTarget.forEach(function(t,e){i[e]=t.value,i[e].sort(function(t,e){return t.valueX-e.valueX});var a,o,s=n._isTimeDomain?n.bisectDate(i[e],new Date(r)):n.bisectDate(i[e],r);a=0===s?i[e][s]:i[e][s-1],o=i[e][s],c[e]=r-a.valueX>o.valueX-r?o:a}),w["default"].isFunction(a)&&a.call(this,c)}},i=t+".event";o.on(i,r[i])}},{key:"draw",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"draw",this).call(this);var t=this;t.updateConfig(t.config,function(e){var a=new d["default"](t.options.axis,t,t.width-t.margin.left-t.margin.right,t.height-t.margin.top-t.margin.bottom),n=new h["default"](t.options.title,t),o=new y["default"](t.options.legend,t),r=new v["default"](t.options.table,t,e);t.axis=a,t.title=n,t.legend=o,t.table=r,t.title.draw(),t.axis.draw(),t.update(e),t.updateSubChart(e),t.updateOverlay(),t.updateHoverLine(),t.updateInteraction(),t.legend.draw(),t.legend.updateInteractionForLineChart(t),t.table.draw()})}},{key:"setOption",value:function(t,a){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOption",this).call(this,t,a);var n=this;w["default"].set(t,a,n.options),n.updateConfig(n.options)}},{key:"updateData",value:function(t,e){var a=this,n={};w["default"].isEmpty(e)?n.data={plain:t}:n.data={plain:t,keys:e},a.updateDataConfig(n,function(t){a.update(t),a.updateSubChart(t),a.axis.update(a.x,a.y,100),a.legend.update(t),a.legend.updateInteractionForLineChart(a),a.table.update(t)})}},{key:"isTimeDomain",get:function(){return this._isTimeDomain},set:function(t){t&&(this._isTimeDomain=t)}},{key:"bisectDate",get:function(){return this._bisectDate},set:function(t){t&&(this._bisectDate=t)}},{key:"hoverLine",get:function(){return this._hoverLine},set:function(t){t&&(this._hoverLine=t)}},{key:"subChartX",get:function(){return this._subChartX},set:function(t){t&&(this._subChartX=t)}},{key:"subChartY",get:function(){return this._subChartY},set:function(t){t&&(this._subChartY=t)}},{key:"subChartWidth",get:function(){return this._subChartWidth},set:function(t){t&&(this._subChartWidth=t)}},{key:"subChartHeight",get:function(){return this._subChartHeight},set:function(t){t&&(this._subChartHeight=t)}},{key:"subChartMargin",get:function(){return this._subChartMargin},set:function(t){t&&(this._subChartMargin=t)}},{key:"subChartXAxis",get:function(){return this._subChartXAxis},set:function(t){t&&(this._subChartXAxis=t)}},{key:"brush",get:function(){return this._brush},set:function(t){t&&(this._brush=t)}},{key:"subChartAreaGen",get:function(){return this._subChartAreaGen},set:function(t){t&&(this._subChartAreaGen=t)}},{key:"lineGen",get:function(){return this._lineGen},set:function(t){t&&(this._lineGen=t)}},{key:"areaGen",get:function(){return this._areaGen},set:function(t){t&&(this._areaGen=t)}}]),e}(u["default"]);e["default"]=O},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),s=function O(t,e,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:O(o,e,a)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(a)},l=a(4),u=n(l),f=a(5),d=(n(f),a(8)),p=n(d),h=a(6),g=n(h),y=a(7),m=n(y),v=a(3),b=n(v),k=a(1),x=n(k),w=a(2),_=n(w),C=function(t){function e(t){o(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n=a;return n.config={radius:Math.min(n.width-n.margin.left-n.margin.right,n.height-n.margin.top-n.margin.bottom)/2},a}return i(e,t),c(e,[{key:"updateConfig",value:function(t,a){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateConfig",this).call(this,t);var n=this;n.options=x["default"].mergeDeep(t,n.options),n.chartType="pie";var o=n.dataOption;o.colorRange=n.colorRange;var r=new _["default"](o,n.chartType,null);r.getDataTarget(n.chartType,function(t){n.dataTarget=t,x["default"].isFunction(a)&&a.call(n,n.dataTarget)})}},{key:"updateDataConfig",value:function(t,e){var a=this;a.options=x["default"].mergeDeep(a.options,t),a.chartType="pie";var n=a.dataOption;n.colorRange=a.colorRange;var o=new _["default"](n,a.chartType,null);o.getDataTarget(a.chartType,function(t){a.dataTarget=t,x["default"].isFunction(e)&&e.call(a,a.dataTarget)})}},{key:"update",value:function(t){var e=this,a=e.width-e.margin.left-e.margin.right,n=e.height-e.margin.top-e.margin.bottom,o=e.colorRange;e.arc=d3.svg.arc().innerRadius(0).outerRadius(e.options.radius),e.pie=d3.layout.pie().sort(null).value(function(t){return t.value}),e.body.selectAll(".c9-chart-pie.c9-custom-arc-container").data([]).exit().remove();var r=e.body.append("g").attr("class","c9-chart-pie c9-custom-arc-container").attr("transform","translate("+a/2+","+n/2+")").selectAll(".c9-chart-pie.c9-custom-arc").data(e.pie(t)).enter().append("g").attr("class","c9-chart-pie c9-custom-arc");r.append("path").attr("class","c9-chart-pie c9-custom-path").attr("data-ref",function(t){return t.data["data-ref"]}).attr("d",e.arc).attr("fill",function(t,e){return o(e)}).attr("stroke","#ffffff").each(function(t){e.currentData=t}),e.updateInteraction()}},{key:"selectAllPath",value:function(){var t=this;return t.body.selectAll("path.c9-chart-pie.c9-custom-path")}},{key:"updateInteraction",value:function(){var t=this,e=t.selectAllPath(),a=(t.colorRange,0),n=t.options.radius,o=0,r=1.2*t.options.radius,i=t.hover.options,c=t.hover.enable,s=i.onMouseOver.callback,l=i.onMouseOut.callback,u=t.click.callback,f=new b["default"](t.options.tooltip);t.eventFactory={click:function(t,e){x["default"].isFunction(u)&&u.call(this,t)},mouseover:function(e,a){if(c){x["default"].isFunction(s)&&s.call(this,e);var n=d3.select(this);if(n.transition().attr("d",d3.svg.arc().innerRadius(o).outerRadius(r)),t.options.legend.show&&t.legend.item.each(function(){d3.select(this).attr("data-ref")!==e.data["data-ref"]&&d3.select(this).attr("data-enable")&&d3.select(this).attr("opacity","0.3")}),t.options.table.show){var i=d3.selectAll(".c9-table-container>.c9-table-body tr");i.filter(function(t){return t["data-ref"]!=e.data["data-ref"]}).selectAll("td").style("opacity","0.5");var l=i.filter(function(t){return t["data-ref"]==e.data["data-ref"]});l.selectAll("td").style("opacity","1"),x["default"].scroll(d3.select(".c9-table-container")[0][0],l[0][0].offsetTop,200)}t.selectAllPath().each(function(){d3.select(this).attr("data-ref")!==e.data["data-ref"]&&d3.select(this).attr("opacity","0.3")}),f.draw(e,t,"mouseover")}},mouseout:function(e,o){if(c){x["default"].isFunction(l)&&l.call(this,e);var r=d3.select(this);r.transition().duration(500).ease("bounce").attr("d",d3.svg.arc().innerRadius(a).outerRadius(n)),t.options.legend.show&&t.legend.item.each(function(){d3.select(this).attr("data-ref")!==e.data["data-ref"]&&d3.select(this).attr("data-enable")&&d3.select(this).attr("opacity","1.0")}),t.options.table.show&&d3.selectAll(".c9-table-container>.c9-table-body tr").selectAll("td").style("opacity",""),t.selectAllPath().each(function(){d3.select(this).attr("data-ref")!==e.data["data-ref"]&&d3.select(this).attr("opacity","1.0")}),f.draw(e,t,"mouseout")}}},e.on(t.eventFactory)}},{key:"on",value:function(t,a){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"on",this).call(this,t,a);var n=this,o=n.selectAllPath(),r={"click.event":function(t){x["default"].isFunction(a)&&a.call(this,t)},"mouseover.event":function(t){x["default"].isFunction(a)&&a.call(this,t)},"mouseout.event":function(t){x["default"].isFunction(a)&&a.call(this,t)}},i=t+".event";o.on(i,r[i])}},{key:"draw",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"draw",this).call(this);var t=this;t.updateConfig(t.config,function(e){var a=new p["default"](t.options.title,t),n=new g["default"](t.options.legend,t,t.dataTarget),o=new m["default"](t.options.table,t,t.dataTarget);t.title=a,t.legend=n,t.table=o,t.title.draw(),t.update(e),t.updateInteraction(),t.legend.draw(),t.legend.updateInteractionForDonutPieChart(t,t.selectAllPath(),t.pie,t.currentData,t.arc),t.table.draw(),t.table.updateInteractionForDonutPieChart(t)})}},{key:"setOption",value:function(t,a){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOption",this).call(this,t,a);var n=this;x["default"].set(t,a,n.options),n.updateConfig(n.options)}},{key:"updateData",value:function(t,e){var a=this,n={};x["default"].isEmpty(e)?n.data={plain:t}:n.data={plain:t,keys:e},a.updateDataConfig(n,function(t){a.update(a.dataTarget),a.legend.update(a.dataTarget),a.legend.updateInteractionForDonutPieChart(a,a.selectAllPath(),a.pie,a.currentData,a.arc),a.table.update(a.dataTarget),a.table.updateInteractionForDonutPieChart(a)})}},{key:"pie",get:function(){return this._pie},set:function(t){t&&(this._pie=t)}},{key:"arc",get:function(){return this._arc},set:function(t){t&&(this._arc=t)}},{key:"currentData",get:function(){return this._currentData},set:function(t){t&&(this._currentData=t)}}]),e}(u["default"]);e["default"]=C},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),s=function O(t,e,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:O(o,e,a)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(a)},l=a(4),u=n(l),f=a(5),d=n(f),p=a(8),h=n(p),g=a(6),y=n(g),m=a(7),v=(n(m),a(3)),b=n(v),k=a(1),x=n(k),w=a(2),_=n(w),C=function(t){function e(t){o(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n=a;return n.config={separatorColor:"rgb(154, 154, 154)",backgroundColor:null,starting:0,ending:0,stack:!0,itemHeight:25,itemMargin:15,labelMargin:50,striped:null},a}return i(e,t),c(e,[{key:"updateConfig",value:function(t,a){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateConfig",this).call(this,t);var n=this;n.options=x["default"].mergeDeep(t,n.options),n.chartType="timeline",n.maxStack=1,n.stackList={};var o=n.dataOption;o.colorRange=n.colorRange;var r=new _["default"](o,n.chartType,null);r.getDataTarget(n.chartType,function(t){n.dataTarget=t;var e=0,o=0,r=0;n.width-n.margin.left-n.margin.right,n.height-n.margin.top-n.margin.bottom;(n.options.stack||0===n.options.ending||0===n.options.starting)&&(n.dataTarget.forEach(function(t,a){n.options.stack&&-1==Object.keys(n.stackList).indexOf(a)&&(n.stackList[a]=e,e++),t.value.forEach(function(t,e){0===n.options.starting&&(t.start<o||0===o)&&(o=t.start),0===n.options.ending&&(t.start>r&&(r=t.start),t.end>r&&(r=t.end))})}),0===n.options.ending&&(n.options.ending=r),0===n.options.starting&&(n.options.starting=o)),n.maxStack=e,n.x=d3.time.scale().domain([n.options.starting,n.options.ending]).range([0,n.width]),x["default"].isFunction(a)&&a.call(n,n.dataTarget)})}},{key:"updateDataConfig",value:function(t,e){var a=this;a.options=x["default"].mergeDeep(a.options,t),a.chartType="timeline",a.maxStack=1,a.stackList={};var n=a.dataOption;n.colorRange=a.colorRange;var o=new _["default"](n,a.chartType,null);o.getDataTarget(a.chartType,function(t){a.dataTarget=t;var n=0,o=0,r=0;a.width-a.margin.left-a.margin.right,a.height-a.margin.top-a.margin.bottom;(a.options.stack||0===a.options.ending||0===a.options.starting)&&(a.dataTarget.forEach(function(t,e){a.options.stack&&-1==Object.keys(a.stackList).indexOf(e)&&(a.stackList[e]=n,n++),t.value.forEach(function(t,e){(t.start<o||0===o)&&(o=t.start),t.start>r&&(r=t.start),t.end>r&&(r=t.end)})}),a.options.ending=r,a.options.starting=o),a.maxStack=n,a.x=d3.time.scale().domain([a.options.starting,a.options.ending]).range([0,a.width]),x["default"].isFunction(e)&&e.call(a,a.dataTarget)})}},{key:"update",value:function(t){var e=this,a=e.width-e.margin.left-e.margin.right,n=(e.height-e.margin.top-e.margin.bottom,a/(e.options.ending-e.options.starting)),o=e.colorRange,r=e.stackList;e.body.selectAll(".c9-timeline-border-bar").data([]).exit().remove(),e.body.selectAll(".c9-timeline-chart.c9-background-container").data([]).exit().remove(),e.body.selectAll(".c9-timeline-chart.c9-stripe-background-container").data([]).exit().remove(),e.body.selectAll(".c9-timeline-chart.c9-rect-container").data([]).exit().remove(),e.svg.selectAll(".c9-timeline-chart.c9-label-container").remove(),e.body.selectAll(".c9-timeline-row-separator").remove(),e.svg.select("#clip").select("rect").attr("height",(e.options.itemHeight+e.options.itemMargin)*t.length),e.body.append("rect").attr("class","c9-timeline-border-bar").attr("x",0).attr("width",a).attr("y",0-e.options.itemMargin/2).attr("height",(e.options.itemHeight+e.options.itemMargin)*(e.options.stack?e.maxStack:1)).attr("stroke","rgb(154, 154, 154)").attr("stroke-width",2).attr("fill","none");var i=e.svg.append("g").attr("class","c9-timeline-chart c9-label-container");t.forEach(function(t,c){var s=(e.options.itemHeight+e.options.itemMargin)*r[c];if(e.options.stack||(s=0),(!e.options.stack&&0==c||e.options.stack)&&e.options.backgroundColor){var l=e.body.append("g").attr("class","c9-timeline-chart c9-background-container");l.selectAll(".c9-background-container").data(t.value).enter().append("rect").attr("class","c9-timeline-background-bar").attr("x",0).attr("width",a).attr("y",s-e.options.itemMargin/2).attr("height",e.options.itemHeight+e.options.itemMargin).attr("fill",x["default"].isArray(e.options.backgroundColor)?e.options.backgroundColor[c%e.maxStack]:e.options.backgroundColor)}if((!e.options.stack&&0==c||e.options.stack)&&e.options.striped){var l=e.body.append("g").attr("class","c9-timeline-chart c9-stripe-background-container");l.selectAll(".c9-stripe-background-container").data(t.value).enter().insert("rect").attr("class","c9-timeline-stripe-background-bar").attr("x",0).attr("width",a).attr("y",s-e.options.itemMargin/2).attr("height",e.options.itemHeight+e.options.itemMargin).attr("fill",c%2?"rgb(255, 255, 255)":"rgb(230, 230, 230)")}var u=e.body.append("g").attr("class","c9-timeline-chart c9-rect-container").attr("clip-path","url(#clip)");if(u.selectAll(".c9-rect-container").data(t.value).enter().append(function(t,e){return document.createElementNS(d3.ns.prefix.svg,"Invalid Date"!=t.end?"rect":"circle");
}).attr("class","c9-timeline-custom-rect").attr("x",function(t,a){return e.x(t.start)}).attr("y",function(t,a){return e.getStackPosition(t,a,c)}).attr("width",function(t,a){return e.x(t.end)-e.x(t.start)}).attr("cy",function(t,a){return e.getStackPosition(t,a,c)+e.options.itemHeight/2}).attr("cx",function(t,a){return e.getXPos(t,a,n)}).attr("r",e.options.itemHeight/2).attr("height",e.options.itemHeight).style("fill",o(c)),e.options.stack&&e.options.separatorColor&&c<e.maxStack-1){var f=e.options.itemHeight+e.options.itemMargin/2+(e.options.itemHeight+e.options.itemMargin)*r[c];e.body.append("svg:line").attr("class","c9-timeline-row-separator").attr("x1",0).attr("x2",a).attr("y1",f).attr("y2",f).attr("stroke-width",3).attr("stroke",x["default"].isArray(e.options.separatorColor)?e.options.separatorColor[c%(e.maxStack-1)]:e.options.separatorColor)}if(e.options.stack&&!x["default"].isEmpty(t.name)&&""!=t.name){var d=e.margin.top+(e.options.itemHeight+e.options.itemMargin)*(void 0===r[c]?0:r[c])+.75*e.options.itemHeight;i.append("text").attr("class","c9-timeline-label").attr("transform","translate("+e.options.labelMargin+","+d+")").text(t.name)}else e.options.stack&&!x["default"].isEmpty(t.icon)&&""!=t.icon&&i.append("image").attr("class","c9-timeline-label").attr("transform","translate("+e.options.labelMargin+","+(e.margin.top+(e.options.itemHeight+e.options.itemMargin)*r[c])+")").attr("xlink:href",t.icon).attr("width",e.options.itemHeight).attr("height",e.options.itemHeight)}),e.updateInteraction()}},{key:"updateSubChart",value:function(t){var e=this;if(e.options.subchart.show){var a=e.width-e.margin.left-e.margin.right,n=(e.height-e.margin.top-e.margin.bottom,e.body.node().getBBox());e.actualHeight=n.height,e.subChartWidth=a,e.subChartHeight=e.options.subchart.height,e.subChartMargin={top:e.actualHeight+100,left:e.margin.left},e.subChartX=d3.time.scale().range([0,e.subChartWidth]),e.subChartX.domain([e.options.starting,e.options.ending]),e.subChartXAxis=d3.svg.axis().scale(e.subChartX).orient("bottom"),e.brush=d3.svg.brush().x(e.subChartX).on("brush",function(){e.x.domain(e.brush.empty()?e.subChartX.domain():e.brush.extent()),e.options.starting=e.x.domain()[0],e.options.ending=e.x.domain()[1],e.axis.update(e.x,e.y,500);a/(e.options.ending-e.options.starting);e.body.selectAll(".c9-timeline-custom-rect").attr("x",function(t,a){return e.x(t.start)}).attr("width",function(t,a){return e.x(t.end)-e.x(t.start)})});var o=(a/(e.options.ending-e.options.starting),e.colorRange);e.svg.attr("height",e.height+e.subChartHeight),e.svg.selectAll(".c9-subchart-custom").remove(),e.svg.selectAll(".c9-subchart-custom .c9-subchart-axis").remove();var r=e.svg.append("g").attr("class","c9-subchart-custom").attr("transform","translate("+e.subChartMargin.left+","+e.subChartMargin.top+")"),i=r.append("g").attr("class","c9-subchart-custom c9-subchart-timeline-container");t.forEach(function(t,a){t.enable&&i.selectAll(".c9-subchart-timeline-container").data(t.value).enter().append(function(t,e){return document.createElementNS(d3.ns.prefix.svg,"Invalid Date"!=t.end?"rect":"circle")}).attr("class","c9-timeline-custom-rect").attr("x",function(t,a){return e.subChartX(t.start)}).attr("y",function(t,n){return e.getStackPosition(t,n,a,!0)}).attr("width",function(t,a){return e.subChartX(t.end)-e.subChartX(t.start)}).attr("cy",function(t,n){return e.getStackPosition(t,n,a)+e.options.itemHeight/2}).attr("cx",function(t,a){return e.subChartX(t.start)}).attr("r",e.options.itemHeight/2).attr("height",e.options.itemHeight/2).style("fill",o(a))}),i.append("g").attr("class","c9-subchart-axis").attr("transform","translate(0,"+e.subChartHeight+")").call(e.subChartXAxis),i.append("g").attr("class","c9-subchart-brush").call(e.brush).selectAll("rect").attr("height",e.subChartHeight)}}},{key:"selectAllRect",value:function(){var t=this;return t.body.selectAll(".c9-timeline-custom-rect")}},{key:"updateInteraction",value:function(){var t=this,e=t.selectAllRect(),a=t.hover.options,n=t.hover.enable,o=a.onMouseOver.callback,r=a.onMouseOut.callback,i=t.click.callback,c=new b["default"](t.options.tooltip);t.eventFactory={click:function(t,e){x["default"].isFunction(i)&&i.call(this,t)},mouseover:function(e,a){n&&(x["default"].isFunction(o)&&o.call(this,e),d3.select(this).style("fill",function(e,a){return t.getLightenColor(e.color||color(a))}),c.draw(e,t,"mouseover"))},mouseout:function(e,a){n&&(x["default"].isFunction(r)&&r.call(this,e),d3.select(this).style("fill",function(t,e){return t.color||color(e)}),c.draw(e,t,"mouseout"))}},e.on(t.eventFactory)}},{key:"getXPos",value:function(t,e,a){var n=this;return(t.start-n.options.starting)*a}},{key:"getStackPosition",value:function(t,e,a,n){var o=this,r=o.stackList;if(o.options.stack){if(n){var i=o.height-o.margin.top-o.margin.bottom,c=o.subChartHeight/i;return(o.options.itemHeight*c+o.options.itemMargin)*r[a]}return(o.options.itemHeight+o.options.itemMargin)*r[a]}return 0}},{key:"on",value:function(t,a){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"on",this).call(this,t,a);var n=this,o=n.selectAllRect(),r={"click.event":function(t){x["default"].isFunction(a)&&a.call(this,t)},"mouseover.event":function(t){x["default"].isFunction(a)&&a.call(this,t)},"mouseout.event":function(t){x["default"].isFunction(a)&&a.call(this,t)}},i=t+".event";o.on(i,r[i])}},{key:"draw",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"draw",this).call(this);var t=this;t.updateConfig(t.config,function(e){var a=new d["default"](t.options.axis,t,t.width-t.margin.left-t.margin.right,(t.options.itemHeight+t.options.itemMargin)*t.maxStack),n=new h["default"](t.options.title,t),o=new y["default"](t.options.legend,t,t.colorRange,e);t.axis=a,t.title=n,t.legend=o,t.title.draw(),t.axis.draw(),t.update(e),t.updateSubChart(e),t.updateInteraction()})}},{key:"setOption",value:function(t,a){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOption",this).call(this,t,a);var n=this;x["default"].set(t,a,n.options),n.updateConfig(n.options)}},{key:"updateData",value:function(t,e){var a=this,n={};x["default"].isEmpty(e)?n.data={plain:t}:n.data={plain:t,keys:e},a.updateDataConfig(n,function(t){a.update(t),a.updateSubChart(t),a.axis.update(a.x,a.y,100)})}},{key:"maxStack",get:function(){return this._maxStack},set:function(t){t&&(this._maxStack=t)}},{key:"subChartX",get:function(){return this._subChartX},set:function(t){t&&(this._subChartX=t)}},{key:"subChartXAxis",get:function(){return this._subChartXAxis},set:function(t){t&&(this._subChartXAxis=t)}},{key:"subChartWidth",get:function(){return this._subChartWidth},set:function(t){t&&(this._subChartWidth=t)}},{key:"subChartHeight",get:function(){return this._subChartHeight},set:function(t){t&&(this._subChartHeight=t)}},{key:"subChartMargin",get:function(){return this._subChartMargin},set:function(t){t&&(this._subChartMargin=t)}},{key:"brush",get:function(){return this._brush},set:function(t){t&&(this._brush=t)}},{key:"stackList",get:function(){return this._stackList},set:function(t){t&&(this._stackList=t)}}]),e}(u["default"]);e["default"]=C},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),i=a(1),c=n(i),s=a(3),l=(n(s),a(2)),u=n(l),f=function(){function t(e){o(this,t);var a=this,n={id:"body",layers:null,view:{lat:0,lon:0,zoom:2},data:null,tooltip:{format:null}};a._options=c["default"].mergeDeep(n,e),a._dataSource=a._options.data,a.initMapConfig()}return r(t,[{key:"initMapConfig",value:function(){var t=this;t.c9Layers=[],t.c9Objs=new ol.source.Vector({}),t.c9GeojsonObjs=[],t.initLayer();var e=document.createElement("div");e.id="c9MapPopup",e.className="c9-map-tooltip-container c9-custom-tooltip-container c9-tooltip-top",document.body.appendChild(e)}},{key:"draw",value:function(){var t=this,e=t.options.view,a=t.options.id;t.c9View=new ol.View({center:ol.proj.fromLonLat([e.lon,e.lat]),zoom:e.zoom>2?e.zoom:2,minZoom:2}),t.c9Map=new ol.Map({target:a,layers:t.c9Layers,view:t.c9View,interactions:ol.interaction.defaults({doubleClickZoom:!1})}),t.c9ObjsLayer=new ol.layer.Vector({source:t.c9Objs,map:t.c9Map}),t.c9Popup=new ol.Overlay({positioning:"bottom-center",element:document.getElementById("c9MapPopup")}),t.c9Map.addOverlay(t.c9Popup),t.c9CustomHover=new ol.layer.Vector({source:new ol.source.Vector,map:t.c9Map,style:new ol.style.Style({stroke:new ol.style.Stroke({color:"rgb(0, 153, 255)",width:3}),fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.2)"})})}),t.addData(t.dataSource),t.updateInteraction()}},{key:"createLayer",value:function(t){var e=this;if(!c["default"].isEmpty(t)){var a=t.type||"Tile",n=t.source||{name:"OSM"},o=new ol.layer[a];o.setSource(e.setupSource(n));var r,i=!0;try{r=o.getSource(),r.getFeatures()}catch(s){try{r=o.getSource().getSource(),r.getFeatures()}catch(s){i=!1}}if(i){var l=function(t){var e={};return t.getKeys().forEach(function(a){e[a]=t.getProperties()[a]}),e.id=t.getId(),e},f=function(){if(!c["default"].isEmpty(t.style))try{e.setStyle({obj:o.getSource(),style:t.style})}catch(a){try{e.setStyle({obj:r,style:t.style})}catch(a){try{e.setStyle({obj:o,style:t.style})}catch(a){throw"Cannot set style for this source"}}}};r.once("change",function(a){if("ready"==r.getState()){var n=r.getFeatures();if(e.c9GeojsonObjs.push(o.getSource()),n.forEach(function(t){t.set("data",l(t)),t.set("type","c9-geojson")}),c["default"].isEmpty(t.data)||!c["default"].isFunction(t.data.condition)||c["default"].isEmpty(t.data.file)||c["default"].isEmpty(t.data.file.url)||c["default"].isEmpty(t.data.file.type))f();else{var i=new u["default"](t.data);i.getDataTarget("",function(e){var a=t.data.condition,o=t.data.process;!c["default"].isEmpty(o)&&c["default"].isFunction(o)&&(e=o(e)),n.forEach(function(t){if(c["default"].isArray(e)){for(var n=0;n<e.length;n++)if(a(t,e[n])){for(var o in e[n])t.get("data")[o]=e[n][o];break}}else if(a(t,e))for(var n in e)t.get("data")[n]=e[n]}),f()})}}})}return e.c9Layers.push(o),c["default"].isEmpty(e.c9Map)||e.c9Map.addLayer(o),o}}},{key:"initLayer",value:function(){var t=this,e=t.options.layers;e instanceof Array?e.forEach(function(e,a){t.createLayer({type:e.type,source:e.source,style:e.style,condition:e.condition,data:e.data})}):c["default"].isObject(e)&&t.createLayer({type:e.type,source:e.source,style:e.style,condition:e.condition,data:e.data})}},{key:"setupSource",value:function(t){var e=void 0;switch(t.name){case"BingMaps":e=new ol.source.BingMaps({key:t.key,imagerySet:t.imagerySet||"Road"});break;case"Stamen":e=new ol.source.Stamen({layer:t.layer||"watercolor"});break;case"TileJSON":e=new ol.source.TileJSON({url:t.url,crossOrigin:t.crossOrigin||"anonymous"});break;case"TileArcGISRest":e=new ol.source.TileArcGISRest({url:t.url});break;case"Vector":e=new ol.source.Vector({url:t.url,format:void 0===t.format?null:new ol.format[t.format]({extractStyles:t.extractStyles||!1})});break;case"Cluster":e=new ol.source.Cluster({distance:t.distance||20,source:this.setupSource(t.source)});break;case"ImageVector":e=new ol.source.ImageVector({source:this.setupSource(t.source),style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.2)"}),stroke:new ol.style.Stroke({color:"#319FD3",width:1})})});break;default:e=new ol.source.OSM}return e}},{key:"updateInteraction",value:function(){var t=this,e=37,a=39,n=46,o=1e3,r=500,i=function(t){return ol.proj.transform(s(t),"EPSG:3857","EPSG:4326")},s=function(t){return ol.extent.getCenter(t.getGeometry().getExtent())},l=function(t){return ol.proj.transform(t,"EPSG:3857","EPSG:4326")},u=function(e){if(t.c9View.getCenter()[0]!=s(e)[0]||t.c9View.getCenter()[1]!=s(e)[1]){var a=ol.animation.pan({duration:o,source:t.c9View.getCenter()});t.c9Map.beforeRender(a),t.c9View.setCenter(s(e))}},f=function(e){function a(a){var i=a.vectorContext,c=a.frameState,s=e.getGeometry().clone(),l=c.time-r,u=l/o,f=25*ol.easing.easeOut(u)+5,d=ol.easing.easeOut(1-u),p=new ol.style.Style({image:new ol.style.Circle({radius:f,snapToPixel:!1,stroke:new ol.style.Stroke({color:"rgba(255, 0, 0, "+d+")",width:.25+d})})});return i.setStyle(p),i.drawGeometry(s),l>o?void ol.Observable.unByKey(n):void t.c9Map.render()}var n,o=3e3,r=(new Date).getTime();n=t.c9Map.on("postcompose",a)},d=function(e){var a=l(t.c9View.getCenter()),n=i(e);return[Math.sqrt(Math.pow(n[0]-a[0],2)+Math.pow(n[1]-a[1],2)),n[0]-a[0]<=0]},p=function(t){if(!c["default"].isEmpty(t)){var e,a=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},n=function(t,e){return""==e||c["default"].isEmpty(e)||c["default"].isObject(e)?"":"<strong>"+a(t)+":</strong><span> "+e+"</span></br>"},o=n("Name",t.name);c["default"].isEmpty(t.coor)||(o+=n("Lon",t.coor.lon||t.coor[0])+n("Lat",t.coor.lat||t.coor[1]));for(var r in e=t.value)o+=n(r,e[r]);return o}};t.c9Map.on("pointermove",function(e){var a=t.c9Map.forEachFeatureAtPixel(e.pixel,function(t,e){return t});if(a!==t.lastHoveredObj){if(t.lastHoveredObj&&("c9-geojson"!=t.lastHoveredObj.get("type")&&t.lastHoveredObj.get("c9-style")?t.lastHoveredObj.setStyle(t.lastHoveredObj.get("c9-style")):t.c9CustomHover.getSource().removeFeature(t.lastHoveredObj)),a){var n=a.get("c9-style"),o="rgb(0, 153, 255)",r=3,i="rgba(255, 255, 255, 0.2)";n&&(o="#319FD3"==n.getStroke().getColor()?"rgb(0, 153, 255)":t.getLightenColor(n.getStroke().getColor()),r=n.getStroke().getWidth()+2,i="rgba(255, 255, 255, 0.2)"==n.getFill().getColor()?"rgba(255, 255, 255, 0.2)":t.getLightenColor(n.getFill().getColor()));var s=new ol.style.Style({stroke:new ol.style.Stroke({color:o,width:r}),fill:new ol.style.Fill({color:i})});n?a.setStyle(s):(t.c9CustomHover.setStyle(s),t.c9CustomHover.getSource().addFeature(a))}t.lastHoveredObj=a}if(a){t.c9Map.getTargetElement().style.cursor="pointer",t.c9Popup.getElement().style.display="none";try{t.options.tooltip.format&&t.options.tooltip.format(a.get("data"))}catch(l){throw"Check data format again"}var u=t.options.tooltip.format?t.options.tooltip.format(a.get("data")):p(a.get("data"));if(c["default"].isEmpty(u)||""==u.toString().trim())return;t.c9Popup.getElement().style.display="block",t.c9Popup.getElement().innerHTML=u,t.c9Popup.setPosition(e.coordinate)}a||(t.c9Map.getTargetElement().style.cursor="",t.c9Popup.getElement().style.display="none")}),t.c9Map.once("postrender",function(e){setTimeout(function(){t.c9Objs.getFeatures().forEach(function(t,e){"c9-marker"==t.get("type")&&f(t)})},r)}),t.c9Map.on("click",function(e){var a=t.c9Map.forEachFeatureAtPixel(e.pixel,function(e,a){return t.lastSelectedObj=e,e});a&&u(a),a||(t.c9Popup.getElement().style.display="none")}),document.addEventListener("keydown",function(o){var i=function(n){var o=void 0,i=1/0;t.c9Objs.getFeatures().forEach(function(t,r){if("c9-marker"==t.get("type")){var c=d(t);(c[1]&&n==e||!c[1]&&n==a)&&c[0]<i&&0!=c[0]&&(i=c[0],o=t)}}),o&&(setTimeout(f(o),r),u(o))};switch(o.keyCode){case e:i(e);break;case a:i(a);break;case n:}})}},{key:"createObject",value:function(t){var e=this;if(!c["default"].isEmpty(t)&&!c["default"].isEmpty(t.data)){var a=t.data,n=t.style,o=function(t,a,n){if(c["default"].isArray(a)||2==a.length){var o="http://s21.postimg.org/blklb8scn/marker_icon.png",r=1,i=a[1],s=a[0],l=n?n.imgSrc||o:o,u=n?n.scale||r:r,f=new ol.Feature({"data-ref":"",type:"c9-marker",data:t,geometry:new ol.geom.Point(ol.proj.fromLonLat([s,i]))}),d=function(t,e){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:t,scale:e})})};return f.setStyle(d(l,u)),e.c9Objs.addFeature(f),f}},r=e.normalizeCoordinate(a.coor);if(null!=r.coor){if("marker"==r.type)return o(a,r.coor,n);var i=n?n.strokeWidth||1:1,s=n?n.strokeColor||"#319FD3":"#319FD3",l=n?n.fillColor||"rgba(255, 255, 255, 0.2)":"rgba(255, 255, 255, 0.2)",u=new ol.Feature({"data-ref":"",type:"c9-"+r.type,data:a,geometry:"polygon"==r.type?new ol.geom.Polygon(r.coor):"line"==r.type?new ol.geom.LineString(r.coor):new ol.geom.MultiPolygon(r.coor)});u.getGeometry().transform("EPSG:4326","EPSG:3857");var f=function(t,e,a){return new ol.style.Style({stroke:new ol.style.Stroke({width:t,color:e}),fill:new ol.style.Fill({color:a})})},d=f(i,s,l);return u.set("c9-style",d),u.setStyle(d),e.c9Objs.addFeature(u),u}}}},{key:"normalizeCoordinate",value:function(t){var e,a=[],n={coor:null,type:null};if(c["default"].isObject(t)&&void 0==t.length||c["default"].isArray(t)&&2==t.length&&!isNaN(t[0])&&!isNaN(t[1]))if(e="marker",void 0==t.length){if(c["default"].isEmpty(t.lat)||c["default"].isEmpty(t.lon))return n;a=[t.lon,t.lat]}else a=t;else if(c["default"].isArray(t)){var o=function(t){var e={};return c["default"].isObject(t)&&void 0==t.length?(e.check=!c["default"].isEmpty(t.lat)&&!c["default"].isEmpty(t.lon),e.check&&(e.coor=[t.lon,t.lat])):(e.check=c["default"].isArray(t)&&2==t.length&&!isNaN(t[0])&&!isNaN(t[1]),e.check&&(e.coor=t)),e};if(2==t.length&&o(t[0]).check&&o(t[1]).check)e="line",a.push(o(t[0]).coor),a.push(o(t[1]).coor);else{if(!(t.length>=1))return n;if(c["default"].isEmpty(t[0][0])||c["default"].isEmpty(t[0][0][0])){if(e="polygon",a.push([]),t[0].forEach(function(t){var e=o(t);e.check&&a[0].push(e.coor)}),a[0].length<=2)return n}else e="multipolygon",t.forEach(function(t,e){return c["default"].isArray(t)&&1==t.length?(a.push([[]]),t[0].forEach(function(t){var n=o(t);n.check&&a[e][0].push(n.coor)}),a[e][0].length<=2?n:void 0):n})}}return{coor:a,type:e}}},{key:"addData",value:function(t){if(!(c["default"].isEmpty(t)||c["default"].isEmpty(t.plain)&&c["default"].isEmpty(t.file))){var e=this,a=new u["default"](t);a.getDataTarget("map",function(t){e.data=t,c["default"].isEmpty(e.c9Map)||(c["default"].isArray(e.data)?e.data.forEach(function(t,a){e.createObject({data:t})}):e.createObject({data:e.data}))})}}},{key:"getObjects",value:function(){var t=[];return this.c9GeojsonObjs.forEach(function(e){try{t=t.concat(e.getSource().getFeatures())}catch(a){try{t=t.concat(e.getFeatures())}catch(a){}}}),this.c9Objs.getFeatures().concat(t)}},{key:"getMap",value:function(){return this.c9Map}},{key:"on",value:function(t,e){var a=this,n={click:function(t){var n=a.c9Map.forEachFeatureAtPixel(a.c9Map.getEventPixel(t),function(t,e){return t});c["default"].isFunction(e)&&n&&e.call(this,n)},pointermove:function(t){var n=a.c9Map.forEachFeatureAtPixel(t.pixel,function(t,e){return t});c["default"].isFunction(e)&&n&&e.call(this,n)},postrender:function(t){c["default"].isFunction(e)&&e.call(this,t)}};"click"==t?a.c9Map.getViewport().addEventListener(t,n[t]):"pointermove"==t?a.c9Map.on(t,n[t]):"postrender"==t&&a.c9Map.once(t,n[t])}},{key:"getLightenColor",value:function(t){if(t.includes("rgba")){var e=t.split(",")[t.split(",").length-1].replace(")",""),a=t.replace(","+e,"").replace("a",""),n=c["default"].shadeColor(-.2,a);return"rgba("+n.split("(")[1].split(")")[0]+","+e.trim()+")"}return c["default"].shadeColor(-.2,t)}},{key:"setStyle",value:function(t){if(!(c["default"].isEmpty(t)||c["default"].isEmpty(t.obj)||c["default"].isEmpty(t.style)))if(c["default"].isFunction(t.style)||t.style instanceof ol.style.Style)t.obj.setStyle(t.style);else{var e,a="http://s21.postimg.org/blklb8scn/marker_icon.png",n=1,o=t.style.strokeColor?t.style.strokeColor:"#319FD3",r=t.style.strokeWidth?t.style.strokeColor:1,i=t.style.fillColor?t.style.fillColor:"rgba(255, 255, 255, 0.2)",s="marker"==t.style.type||"c9-marker"==t.style.type?t.style.imgSrc||a:null,l="marker"==t.style.type||"c9-marker"==t.style.type?t.style.scale||n:null;null!=s?t.obj.setStyle(e=new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:s,scale:l})})):t.obj.setStyle(e=new ol.style.Style({stroke:new ol.style.Stroke({color:o,width:r}),fill:new ol.style.Fill({color:i})})),t.obj.set("c9-style",e)}}},{key:"createLayerFromGeojson",value:function(t){var e=this;c["default"].isEmpty(t)||c["default"].isEmpty(t.url)||e.createLayer({type:"Image",source:{name:"ImageVector",source:{name:"Vector",url:t.url,format:"GeoJSON"}},data:t.data,style:t.style})}},{key:"dataSource",get:function(){return this._dataSource},set:function(t){t&&(this._dataSource=t)}},{key:"data",get:function(){return this._data},set:function(t){t&&(this._data=t)}},{key:"options",get:function(){return this._options}}]),t}();e["default"]=f},function(t,e){}])});
//# sourceMappingURL=C9.min.js.map